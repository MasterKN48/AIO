{"version":3,"sources":["../node_modules/webpack/buildin/amd-define.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/process/browser.js","../node_modules/when/lib/env.js","../node_modules/ffmpeg/lib/errors.js","../node_modules/when/when.js","../node_modules/when/lib/TimeoutError.js","../node_modules/when/lib/state.js","../node_modules/when/lib/apply.js","../node_modules/ffmpeg/lib/utils.js","../node_modules/path-browserify/index.js","../node_modules/ffmpeg/index.js","../node_modules/ffmpeg/lib/ffmpeg.js","../node_modules/when/lib/decorators/timed.js","../node_modules/when/lib/decorators/array.js","../node_modules/when/lib/decorators/flow.js","../node_modules/when/lib/decorators/fold.js","../node_modules/when/lib/decorators/inspect.js","../node_modules/when/lib/decorators/iterate.js","../node_modules/when/lib/decorators/progress.js","../node_modules/when/lib/decorators/with.js","../node_modules/when/lib/decorators/unhandledRejection.js","../node_modules/when/lib/format.js","../node_modules/when/lib/Promise.js","../node_modules/when/lib/makePromise.js","../node_modules/when/lib/Scheduler.js","../node_modules/node-libs-browser/node_modules/util/util.js","../node_modules/node-libs-browser/node_modules/util/support/isBufferBrowser.js","../node_modules/node-libs-browser/node_modules/util/node_modules/inherits/inherits_browser.js","../node_modules/ffmpeg/lib/configs.js","../node_modules/ffmpeg/lib/video.js","../node_modules/ffmpeg/lib/presets.js"],"names":["module","exports","Error","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_slicedToArray","arr","Array","isArray","Symbol","iterator","prototype","toString","call","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","TypeError","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","e","this","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","define","require","MutationObs","capturedSetTimeout","setTimer","f","ms","clearTimer","t","asap","MutationObserver","WebKitMutationObserver","scheduled","node","document","createTextNode","observe","characterData","data","initMutationObserver","vertx","vertxRequire","cancelTimer","runOnLoop","runOnContext","util","list","renderError","codeName","params","msg","slice","code","format","timed","flow","fold","inspect","generate","progress","withThis","unhandledRejection","TimeoutError","Promise","reduce","feature","when","x","onFulfilled","onRejected","onProgress","p","resolve","then","lift","l","a","attempt","Deferred","_defer","_handler","reject","notify","promise","resolver","iterate","unfold","join","all","promises","settle","any","some","race","map","mapFunc","predicate","reduceRight","isPromiseLike","defer","message","captureStackTrace","create","constructor","pending","toPendingState","fulfilled","toFulfilledState","rejected","toRejectedState","handler","state","reason","makeApply","tryCatchResolve","thisArg","callAndResolve","c","h","callAndResolveNext","exec","fs","path","errors","commands","settings","callback","finalCommand","timeoutID","error","stdout","stderr","kill","isEmptyObj","prop","hasOwnProperty","mergeObject","obj1","durationToSeconds","duration","parts","substr","split","parseInt","gcd","b","mkdir","dirpath","mode","position","normalize","directory","charAt","existsSync","mkdirSync","in_array","normalizeArray","allowAboveRoot","up","last","splice","unshift","xs","res","resolvedPath","resolvedAbsolute","isAbsolute","trailingSlash","paths","index","relative","from","to","trim","start","end","fromParts","toParts","Math","min","samePartsLength","outputParts","sep","delimiter","dirname","charCodeAt","hasRoot","matchedSlash","basename","ext","extname","startDot","startPart","preDotState","str","utils","configs","video","_ffmpegInfoConfiguration","deferred","modules","encode","decode","configuration","match","indexModule","codecList","scope","replace","extension","_videoInfo","fileInput","filename","artist","album","track","date","is_synched","container","video_bitrate","video_stream","video_codec","resolution","pixel","aspect","fps","audio_stream","audio_codec","sample_rate","channels","audio_bitrate","rotate","ret","synched","raw","seconds","bitrate","stream","parseFloat","codec","w","resolutionSquare","audio","stereo","mono","aspectValue","y","string","gcdValue","pixelString","pixelValue","_getInformation","deferreds","__constructor","inputFilepath","handleDelay","resolveDelay","onTimeout","delay","_beget","visit","applier","applyFold","toPromise","ar","become","_visitRemaining","handleFulfill","handleReject","RangeError","resolved","n","nReject","results","nFulfill","max","fulfill","settleOne","_traverse","keep","filtered","j","filterSync","liftCombine","spread","_unreport","z","origCatch","createCatchFilter","isError","evaluatePredicate","runSideEffect","propagate","result","propagateValue","onResult","onError","receiver","otherwise","ensure","rejectInvalidPredicate","identity","orElse","defaultValue","tap","onFulfilledSideEffect","condition","unspool","seed","item","newSeed","child","chain","localConsole","logError","logInfo","console","log","info","onPotentiallyUnhandledRejection","rejection","enqueue","report","onPotentiallyUnhandledRejectionHandled","unreport","onFatalRejection","throwit","tasks","reported","running","r","handled","id","formatError","indexOf","formatObject","flush","shift","s","stack","tryStringify","o","String","JSON","stringify","makePromise","scheduler","environment","emitRejection","type","self","CustomEvent","ignoredException","hasCustomEvent","ev","detail","bubbles","cancelable","dispatchEvent","createEvent","initCustomEvent","hasInternetExplorerCustomEvent","initEmitRejection","objectCreate","proto","Child","Handler","Pending","promiseReject","init","isPromise","Async","getHandler","Rejected","never","foreverPendingPromise","traverseWith","tryMap","traverseAt","settleAt","Fulfilled","maybeThenable","getHandlerUntrusted","getHandlerMaybeThenable","visitRemaining","markAsHandled","untrustedThen","Thenable","FailIfRejected","parent","context","begetFrom","snd","runRace","tryCatch2","fail","_report","_state","failIfRejected","Fold","inherit","inheritedContext","createContext","consumers","thenable","AssimilateTask","q","continuation","ContinuationTask","ProgressTask","enterContext","tryCatchReject3","exitContext","runContinuation3","cont","runContinuation1","errorId","ReportTask","UnreportTask","afterQueue","foreverPendingHandler","_then","tryCatchReject","runNotify","tryCatchReturn","Parent","tryAssimilate","Scheduler","async","_async","_running","_queue","_queueLen","_afterQueue","_afterQueueLen","drain","_drain","task","descriptors","formatRegExp","isString","objects","Number","_","isNull","isObject","deprecate","fn","noDeprecation","warned","throwDeprecation","traceDeprecation","trace","debugEnviron","debugs","opts","ctx","seen","stylize","stylizeNoColor","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","styleType","style","styles","recurseTimes","isFunction","primitive","simple","isNumber","formatPrimitive","visibleKeys","hash","val","idx","arrayToHash","getOwnPropertyNames","isRegExp","RegExp","isDate","Date","output","base","braces","toUTCString","formatProperty","formatArray","pop","prev","cur","numLinesEst","reduceToSingleString","desc","get","set","line","arg","re","objectToString","d","pad","debuglog","NODE_DEBUG","toUpperCase","test","pid","isNullOrUndefined","isSymbol","isPrimitive","isBuffer","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","inherits","origin","add","kCustomPromisifiedSymbol","callbackifyOnRejected","cb","newReason","promisify","original","promiseResolve","setPrototypeOf","getPrototypeOf","custom","callbackify","callbackified","maybeCb","rej","copy","fill","readUInt8","ctor","superCtor","super_","TempCtor","encoding","maxBuffer","presets","filePath","infoConfiguration","infoFile","file_path","info_configuration","metadata","inputs","filtersComlpex","options","addCommand","command","argument","addInput","addFilterComplex","setOutput","setDisableAudio","disabled","setDisableVideo","setVideoFormat","setVideoCodec","setVideoBitRate","setVideoFrameRate","framerate","setVideoStartTime","isNaN","startTime","setVideoDuration","setVideoAspectRatio","check","setVideoSize","size","keepPixelAspectRatio","keepAspectRatio","paddingColor","setAudioCodec","setAudioFrequency","frequency","setAudioChannels","channel","audio_channel","setAudioBitRate","setAudioQuality","quality","setWatermark","watermarkPath","baseSettings","margin_nord","margin_sud","margin_east","margin_west","overlay","getSing","inverse","abs","getHorizontalMargins","east","west","getVerticalMargins","nord","sud","watermark","save","destionationFileName","newDimension","_calculateNewDimension","width","height","execCommand","resetCommands","referrerResolution","fixedWidth","fixedHeight","percentage","classicSize","round","ratio","folder","onlyDestinationFile","finalCommands","readdirSync","fnExtractSoundToMP3","unlinkSync","destinationDirName","destinationFileNameWE","finalPath","fnExtractFrameToJPG","destinationFolder","newSettings","start_time","duration_time","frame_rate","number","every_n_frames","every_n_seconds","every_n_percentage","keep_pixel_aspect_ratio","keep_aspect_ratio","padding_color","file_name","every_n_check","replacements","getTime","fnAddWatermark","newFilepath"],"mappings":"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","file":"static/js/3.88717447.chunk.js","sourcesContent":["module.exports = function() {\n\tthrow new Error(\"define cannot be used indirect\");\n};\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n/*global process,document,setTimeout,clearTimeout,MutationObserver,WebKitMutationObserver*/\n(function(define) { 'use strict';\ndefine(function(require) {\n\t/*jshint maxcomplexity:6*/\n\n\t// Sniff \"best\" async scheduling option\n\t// Prefer process.nextTick or MutationObserver, then check for\n\t// setTimeout, and finally vertx, since its the only env that doesn't\n\t// have setTimeout\n\n\tvar MutationObs;\n\tvar capturedSetTimeout = typeof setTimeout !== 'undefined' && setTimeout;\n\n\t// Default env\n\tvar setTimer = function(f, ms) { return setTimeout(f, ms); };\n\tvar clearTimer = function(t) { return clearTimeout(t); };\n\tvar asap = function (f) { return capturedSetTimeout(f, 0); };\n\n\t// Detect specific env\n\tif (isNode()) { // Node\n\t\tasap = function (f) { return process.nextTick(f); };\n\n\t} else if (MutationObs = hasMutationObserver()) { // Modern browser\n\t\tasap = initMutationObserver(MutationObs);\n\n\t} else if (!capturedSetTimeout) { // vert.x\n\t\tvar vertxRequire = require;\n\t\tvar vertx = vertxRequire('vertx');\n\t\tsetTimer = function (f, ms) { return vertx.setTimer(ms, f); };\n\t\tclearTimer = vertx.cancelTimer;\n\t\tasap = vertx.runOnLoop || vertx.runOnContext;\n\t}\n\n\treturn {\n\t\tsetTimer: setTimer,\n\t\tclearTimer: clearTimer,\n\t\tasap: asap\n\t};\n\n\tfunction isNode () {\n\t\treturn typeof process !== 'undefined' &&\n\t\t\tObject.prototype.toString.call(process) === '[object process]';\n\t}\n\n\tfunction hasMutationObserver () {\n\t    return (typeof MutationObserver !== 'undefined' && MutationObserver) ||\n\t\t\t(typeof WebKitMutationObserver !== 'undefined' && WebKitMutationObserver);\n\t}\n\n\tfunction initMutationObserver(MutationObserver) {\n\t\tvar scheduled;\n\t\tvar node = document.createTextNode('');\n\t\tvar o = new MutationObserver(run);\n\t\to.observe(node, { characterData: true });\n\n\t\tfunction run() {\n\t\t\tvar f = scheduled;\n\t\t\tscheduled = void 0;\n\t\t\tf();\n\t\t}\n\n\t\tvar i = 0;\n\t\treturn function (f) {\n\t\t\tscheduled = f;\n\t\t\tnode.data = (i ^= 1);\n\t\t};\n\t}\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n","var util = require('util');\n\n// Error list with code and message\nvar list = {\n\t'empty_input_filepath'\t\t\t\t\t\t\t: { 'code' : 100, 'msg' : 'The input file path can not be empty' }\n  , 'input_filepath_must_be_string'\t\t\t\t\t: { 'code' : 101, 'msg' : 'The input file path must be a string' }\n  , 'invalid_option_name'\t\t\t\t\t\t\t: { 'code' : 102, 'msg' : 'The option \"%s\" is invalid. Check the list of available options' }\n  , 'fileinput_not_exist'\t\t\t\t\t\t\t: { 'code' : 103, 'msg' : 'The input file does not exist' }\n  , 'format_not_supported'\t\t\t\t\t\t\t: { 'code' : 104, 'msg' : 'The format \"$s\" is not supported by the version of ffmpeg' }\n  , 'audio_channel_is_invalid'\t\t\t\t\t\t: { 'code' : 105, 'msg' : 'The audio channel \"$s\" is not valid' }\n  , 'mkdir'\t\t\t\t\t\t\t\t\t\t\t: { 'code' : 106, 'msg' : 'Error occurred during creation folder: $s' }\n  , 'extract_frame_invalid_everyN_options'\t\t\t: { 'code' : 107, 'msg' : 'You can specify only one option between everyNFrames and everyNSeconds' }\n  , 'invalid_watermark'\t\t\t\t\t\t\t\t: { 'code' : 108, 'msg' : 'The watermark \"%s\" does not exists' }\n  , 'invalid_watermark_position'\t\t\t\t\t: { 'code' : 109, 'msg' : 'Invalid watermark position \"%s\"' }\n  , 'size_format'\t\t\t\t\t\t\t\t\t: { 'code' : 110, 'msg' : 'The format \"%s\" not supported by the function \"setSize\"' }\n  , 'resolution_square_not_defined'\t\t\t\t\t: { 'code' : 111, 'msg' : 'The resolution for pixel aspect ratio is not defined' }\n  , 'command_already_exists'\t\t\t\t\t\t: { 'code' : 112, 'msg' : 'The command \"%s\" already exists' }\n  , 'codec_not_supported'\t\t\t\t\t\t\t: { 'code' : 113, 'msg' : 'The codec \"$s\" is not supported by the version of ffmpeg' }\n}\n\n/**\n * Return the error by the codename\n */\nvar renderError = function (codeName) {\n\t// Get the error object by the codename\n\tvar params = [list[codeName].msg];\n\t// Get the possible arguments\n\tif (arguments.length > 1)\n\t\tparams = params.concat(Array.prototype.slice.call(arguments, 1));\n\t// Call the function for replace the letter '%s' with the found arguments\n\treturn { 'code' : list[codeName].code, 'msg' : util.format.apply(this, params) };\n}\n\nmodule.exports.list = list;\nmodule.exports.renderError = renderError;","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n\n/**\n * Promises/A+ and when() implementation\n * when is part of the cujoJS family of libraries (http://cujojs.com/)\n * @author Brian Cavalier\n * @author John Hann\n */\n(function(define) { 'use strict';\ndefine(function (require) {\n\n\tvar timed = require('./lib/decorators/timed');\n\tvar array = require('./lib/decorators/array');\n\tvar flow = require('./lib/decorators/flow');\n\tvar fold = require('./lib/decorators/fold');\n\tvar inspect = require('./lib/decorators/inspect');\n\tvar generate = require('./lib/decorators/iterate');\n\tvar progress = require('./lib/decorators/progress');\n\tvar withThis = require('./lib/decorators/with');\n\tvar unhandledRejection = require('./lib/decorators/unhandledRejection');\n\tvar TimeoutError = require('./lib/TimeoutError');\n\n\tvar Promise = [array, flow, fold, generate, progress,\n\t\tinspect, withThis, timed, unhandledRejection]\n\t\t.reduce(function(Promise, feature) {\n\t\t\treturn feature(Promise);\n\t\t}, require('./lib/Promise'));\n\n\tvar apply = require('./lib/apply')(Promise);\n\n\t// Public API\n\n\twhen.promise     = promise;              // Create a pending promise\n\twhen.resolve     = Promise.resolve;      // Create a resolved promise\n\twhen.reject      = Promise.reject;       // Create a rejected promise\n\n\twhen.lift        = lift;                 // lift a function to return promises\n\twhen['try']      = attempt;              // call a function and return a promise\n\twhen.attempt     = attempt;              // alias for when.try\n\n\twhen.iterate     = Promise.iterate;      // DEPRECATED (use cujojs/most streams) Generate a stream of promises\n\twhen.unfold      = Promise.unfold;       // DEPRECATED (use cujojs/most streams) Generate a stream of promises\n\n\twhen.join        = join;                 // Join 2 or more promises\n\n\twhen.all         = all;                  // Resolve a list of promises\n\twhen.settle      = settle;               // Settle a list of promises\n\n\twhen.any         = lift(Promise.any);    // One-winner race\n\twhen.some        = lift(Promise.some);   // Multi-winner race\n\twhen.race        = lift(Promise.race);   // First-to-settle race\n\n\twhen.map         = map;                  // Array.map() for promises\n\twhen.filter      = filter;               // Array.filter() for promises\n\twhen.reduce      = lift(Promise.reduce);       // Array.reduce() for promises\n\twhen.reduceRight = lift(Promise.reduceRight);  // Array.reduceRight() for promises\n\n\twhen.isPromiseLike = isPromiseLike;      // Is something promise-like, aka thenable\n\n\twhen.Promise     = Promise;              // Promise constructor\n\twhen.defer       = defer;                // Create a {promise, resolve, reject} tuple\n\n\t// Error types\n\n\twhen.TimeoutError = TimeoutError;\n\n\t/**\n\t * Get a trusted promise for x, or by transforming x with onFulfilled\n\t *\n\t * @param {*} x\n\t * @param {function?} onFulfilled callback to be called when x is\n\t *   successfully fulfilled.  If promiseOrValue is an immediate value, callback\n\t *   will be invoked immediately.\n\t * @param {function?} onRejected callback to be called when x is\n\t *   rejected.\n\t * @param {function?} onProgress callback to be called when progress updates\n\t *   are issued for x. @deprecated\n\t * @returns {Promise} a new promise that will fulfill with the return\n\t *   value of callback or errback or the completion value of promiseOrValue if\n\t *   callback and/or errback is not supplied.\n\t */\n\tfunction when(x, onFulfilled, onRejected, onProgress) {\n\t\tvar p = Promise.resolve(x);\n\t\tif (arguments.length < 2) {\n\t\t\treturn p;\n\t\t}\n\n\t\treturn p.then(onFulfilled, onRejected, onProgress);\n\t}\n\n\t/**\n\t * Creates a new promise whose fate is determined by resolver.\n\t * @param {function} resolver function(resolve, reject, notify)\n\t * @returns {Promise} promise whose fate is determine by resolver\n\t */\n\tfunction promise(resolver) {\n\t\treturn new Promise(resolver);\n\t}\n\n\t/**\n\t * Lift the supplied function, creating a version of f that returns\n\t * promises, and accepts promises as arguments.\n\t * @param {function} f\n\t * @returns {Function} version of f that returns promises\n\t */\n\tfunction lift(f) {\n\t\treturn function() {\n\t\t\tfor(var i=0, l=arguments.length, a=new Array(l); i<l; ++i) {\n\t\t\t\ta[i] = arguments[i];\n\t\t\t}\n\t\t\treturn apply(f, this, a);\n\t\t};\n\t}\n\n\t/**\n\t * Call f in a future turn, with the supplied args, and return a promise\n\t * for the result.\n\t * @param {function} f\n\t * @returns {Promise}\n\t */\n\tfunction attempt(f /*, args... */) {\n\t\t/*jshint validthis:true */\n\t\tfor(var i=0, l=arguments.length-1, a=new Array(l); i<l; ++i) {\n\t\t\ta[i] = arguments[i+1];\n\t\t}\n\t\treturn apply(f, this, a);\n\t}\n\n\t/**\n\t * Creates a {promise, resolver} pair, either or both of which\n\t * may be given out safely to consumers.\n\t * @return {{promise: Promise, resolve: function, reject: function, notify: function}}\n\t */\n\tfunction defer() {\n\t\treturn new Deferred();\n\t}\n\n\tfunction Deferred() {\n\t\tvar p = Promise._defer();\n\n\t\tfunction resolve(x) { p._handler.resolve(x); }\n\t\tfunction reject(x) { p._handler.reject(x); }\n\t\tfunction notify(x) { p._handler.notify(x); }\n\n\t\tthis.promise = p;\n\t\tthis.resolve = resolve;\n\t\tthis.reject = reject;\n\t\tthis.notify = notify;\n\t\tthis.resolver = { resolve: resolve, reject: reject, notify: notify };\n\t}\n\n\t/**\n\t * Determines if x is promise-like, i.e. a thenable object\n\t * NOTE: Will return true for *any thenable object*, and isn't truly\n\t * safe, since it may attempt to access the `then` property of x (i.e.\n\t *  clever/malicious getters may do weird things)\n\t * @param {*} x anything\n\t * @returns {boolean} true if x is promise-like\n\t */\n\tfunction isPromiseLike(x) {\n\t\treturn x && typeof x.then === 'function';\n\t}\n\n\t/**\n\t * Return a promise that will resolve only once all the supplied arguments\n\t * have resolved. The resolution value of the returned promise will be an array\n\t * containing the resolution values of each of the arguments.\n\t * @param {...*} arguments may be a mix of promises and values\n\t * @returns {Promise}\n\t */\n\tfunction join(/* ...promises */) {\n\t\treturn Promise.all(arguments);\n\t}\n\n\t/**\n\t * Return a promise that will fulfill once all input promises have\n\t * fulfilled, or reject when any one input promise rejects.\n\t * @param {array|Promise} promises array (or promise for an array) of promises\n\t * @returns {Promise}\n\t */\n\tfunction all(promises) {\n\t\treturn when(promises, Promise.all);\n\t}\n\n\t/**\n\t * Return a promise that will always fulfill with an array containing\n\t * the outcome states of all input promises.  The returned promise\n\t * will only reject if `promises` itself is a rejected promise.\n\t * @param {array|Promise} promises array (or promise for an array) of promises\n\t * @returns {Promise} promise for array of settled state descriptors\n\t */\n\tfunction settle(promises) {\n\t\treturn when(promises, Promise.settle);\n\t}\n\n\t/**\n\t * Promise-aware array map function, similar to `Array.prototype.map()`,\n\t * but input array may contain promises or values.\n\t * @param {Array|Promise} promises array of anything, may contain promises and values\n\t * @param {function(x:*, index:Number):*} mapFunc map function which may\n\t *  return a promise or value\n\t * @returns {Promise} promise that will fulfill with an array of mapped values\n\t *  or reject if any input promise rejects.\n\t */\n\tfunction map(promises, mapFunc) {\n\t\treturn when(promises, function(promises) {\n\t\t\treturn Promise.map(promises, mapFunc);\n\t\t});\n\t}\n\n\t/**\n\t * Filter the provided array of promises using the provided predicate.  Input may\n\t * contain promises and values\n\t * @param {Array|Promise} promises array of promises and values\n\t * @param {function(x:*, index:Number):boolean} predicate filtering predicate.\n\t *  Must return truthy (or promise for truthy) for items to retain.\n\t * @returns {Promise} promise that will fulfill with an array containing all items\n\t *  for which predicate returned truthy.\n\t */\n\tfunction filter(promises, predicate) {\n\t\treturn when(promises, function(promises) {\n\t\t\treturn Promise.filter(promises, predicate);\n\t\t});\n\t}\n\n\treturn when;\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\t/**\n\t * Custom error type for promises rejected by promise.timeout\n\t * @param {string} message\n\t * @constructor\n\t */\n\tfunction TimeoutError (message) {\n\t\tError.call(this);\n\t\tthis.message = message;\n\t\tthis.name = TimeoutError.name;\n\t\tif (typeof Error.captureStackTrace === 'function') {\n\t\t\tError.captureStackTrace(this, TimeoutError);\n\t\t}\n\t}\n\n\tTimeoutError.prototype = Object.create(Error.prototype);\n\tTimeoutError.prototype.constructor = TimeoutError;\n\n\treturn TimeoutError;\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn {\n\t\tpending: toPendingState,\n\t\tfulfilled: toFulfilledState,\n\t\trejected: toRejectedState,\n\t\tinspect: inspect\n\t};\n\n\tfunction toPendingState() {\n\t\treturn { state: 'pending' };\n\t}\n\n\tfunction toRejectedState(e) {\n\t\treturn { state: 'rejected', reason: e };\n\t}\n\n\tfunction toFulfilledState(x) {\n\t\treturn { state: 'fulfilled', value: x };\n\t}\n\n\tfunction inspect(handler) {\n\t\tvar state = handler.state();\n\t\treturn state === 0 ? toPendingState()\n\t\t\t : state > 0   ? toFulfilledState(handler.value)\n\t\t\t               : toRejectedState(handler.value);\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\tmakeApply.tryCatchResolve = tryCatchResolve;\n\n\treturn makeApply;\n\n\tfunction makeApply(Promise, call) {\n\t\tif(arguments.length < 2) {\n\t\t\tcall = tryCatchResolve;\n\t\t}\n\n\t\treturn apply;\n\n\t\tfunction apply(f, thisArg, args) {\n\t\t\tvar p = Promise._defer();\n\t\t\tvar l = args.length;\n\t\t\tvar params = new Array(l);\n\t\t\tcallAndResolve({ f:f, thisArg:thisArg, args:args, params:params, i:l-1, call:call }, p._handler);\n\n\t\t\treturn p;\n\t\t}\n\n\t\tfunction callAndResolve(c, h) {\n\t\t\tif(c.i < 0) {\n\t\t\t\treturn call(c.f, c.thisArg, c.params, h);\n\t\t\t}\n\n\t\t\tvar handler = Promise._handler(c.args[c.i]);\n\t\t\thandler.fold(callAndResolveNext, c, void 0, h);\n\t\t}\n\n\t\tfunction callAndResolveNext(c, x, h) {\n\t\t\tc.params[c.i] = x;\n\t\t\tc.i -= 1;\n\t\t\tcallAndResolve(c, h);\n\t\t}\n\t}\n\n\tfunction tryCatchResolve(f, thisArg, args, resolver) {\n\t\ttry {\n\t\t\tresolver.resolve(f.apply(thisArg, args));\n\t\t} catch(e) {\n\t\t\tresolver.reject(e);\n\t\t}\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n\n","var exec\t= require('child_process').exec\n  , fs\t\t= require('fs')\n  , path\t= require('path');\n\nvar errors\t= require('./errors');\n\n/**\n * Exec the list of commands and call the callback function at the end of the process\n */\nmodule.exports.exec = function (commands, settings, callback) {\n\t// Create final command line\n\tvar finalCommand = commands.join(\" \");\n\t// Create the timeoutId for stop the timeout at the end the process\n\tvar timeoutID = null;\n\t// Exec the command\n\tvar process = exec(finalCommand, settings, function (error, stdout, stderr) {\n\t\t// Clear timeout if 'timeoutID' are setted\n\t\tif (timeoutID !== null) clearTimeout(timeoutID);\n\t\t// Call the callback function\n\t\tcallback(error, stdout, stderr);\n\t});\n\t// Verify if the timeout are setting\n\tif (settings.timeout > 0) {\n\t\t// Set the timeout\n\t\ttimeoutID = setTimeout(function () {\n\t\t\tprocess.kill();\n\t\t}, 100);\t\t\n\t}\n}\n\n/**\n * Check if object is empty\n */\nmodule.exports.isEmptyObj = function (obj) {\n\t// Scan all properties\n    for(var prop in obj)\n\t\t// Check if obj has a property\n        if(obj.hasOwnProperty(prop))\n\t\t\t// The object is not empty\n            return false;\n\t// The object is empty\n    return true;\n}\n\n/**\n * Merge obj1 into obj\n */\nmodule.exports.mergeObject = function (obj, obj1) {\n\t// Check if there are options set\n\tif (!module.exports.isEmptyObj(obj1)) {\n\t\t// Scan all settings\n\t\tfor (var key in obj1) {\n\t\t\t// Check if the option is valid\n\t\t\tif (!obj.hasOwnProperty(key))\n\t\t\t\tthrow errors.renderError('invalid_option_name', key);\n\t\t\t// Set new option value\n\t\t\tobj[key] = obj1[key];\n\t\t}\n\t}\n}\n\n/**\n * Calculate the duration in seconds from the string retrieved by the ffmpeg info\n */\nmodule.exports.durationToSeconds = function(duration) {\n\tvar parts = duration.substr(0,8).split(':');\n\treturn parseInt(parts[0], 10) * 3600 + parseInt(parts[1], 10) * 60 + parseInt(parts[2], 10);\n};\n\n/**\n * Calculate the greatest common divisor\n */\nmodule.exports.gcd = function (a, b) { \n\tif (b === 0) return a;\n\treturn module.exports.gcd(b, a % b);\n}\n\n/**\n * Offers functionality similar to mkdir -p\n */\nmodule.exports.mkdir = function (dirpath, mode, callback, position) {\n\t// Split all directories\n    var parts = path.normalize(dirpath).split('/');\n\t// If the first part is empty then remove this part\n\tif (parts[0] == \"\") \n\t\tparts = parts.slice(1);\n\t\n\t// Set the initial configuration\n    mode = mode || 0777;\n    position = position || 0;\n\t\n\t// Check se current position is greater than the list of folders\n\tif (position > parts.length) {\n\t\t// If isset the callback then it will be invoked\n\t\tif (callback) \n\t\t\tcallback();\n\t\t// Exit and return a positive value\n\t\treturn true;\n\t}\n\n\t// Build the directory path\n\tvar directory = (dirpath.charAt(0) == '/' ? '/' : '') + parts.slice(0, position + 1).join('/');\n\n\t// Check if directory exists\n\tif (fs.existsSync(directory)) {\n\t\tmodule.exports.mkdir(dirpath, mode, callback, position + 1);\n\t} else {\n\t\tif (fs.mkdirSync(directory, mode)) {\n\t\t\t// If isset the callback then it will be invoked\n\t\t\tif (callback) \n\t\t\t\tcallback(errors.renderError('mkdir', directory));\n\t\t\t// Send the new exception\n\t\t\tthrow errors.renderError('mkdir', directory);\n\t\t} else {\n\t\t\tmodule.exports.mkdir(dirpath, mode, callback, position + 1);\n\t\t}\n\t}\n}\n\n/**\n * Check if a value is present inside an array\n */\nmodule.exports.in_array = function (value, array) {\n\t// Scan all element\n\tfor (var i in array)\n\t\t// Check if value exists\n\t\tif (array[i] == value)\n\t\t\t// Return the position of value\n\t\t\treturn i;\n\t// The value not exists\n\treturn false;\n}","// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,\n// backported and transplited with Babel, with backwards-compat fixes\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length - 1; i >= 0; i--) {\n    var last = parts[i];\n    if (last === '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\n  var resolvedPath = '',\n      resolvedAbsolute = false;\n\n  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n    var path = (i >= 0) ? arguments[i] : process.cwd();\n\n    // Skip empty and invalid entries\n    if (typeof path !== 'string') {\n      throw new TypeError('Arguments to path.resolve must be strings');\n    } else if (!path) {\n      continue;\n    }\n\n    resolvedPath = path + '/' + resolvedPath;\n    resolvedAbsolute = path.charAt(0) === '/';\n  }\n\n  // At this point the path should be resolved to a full absolute path, but\n  // handle relative paths to be safe (might happen when process.cwd() fails)\n\n  // Normalize the path\n  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\n  var isAbsolute = exports.isAbsolute(path),\n      trailingSlash = substr(path, -1) === '/';\n\n  // Normalize the path\n  path = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n\n  return (isAbsolute ? '/' : '') + path;\n};\n\n// posix version\nexports.isAbsolute = function(path) {\n  return path.charAt(0) === '/';\n};\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    if (typeof p !== 'string') {\n      throw new TypeError('Arguments to path.join must be strings');\n    }\n    return p;\n  }).join('/'));\n};\n\n\n// path.relative(from, to)\n// posix version\nexports.relative = function(from, to) {\n  from = exports.resolve(from).substr(1);\n  to = exports.resolve(to).substr(1);\n\n  function trim(arr) {\n    var start = 0;\n    for (; start < arr.length; start++) {\n      if (arr[start] !== '') break;\n    }\n\n    var end = arr.length - 1;\n    for (; end >= 0; end--) {\n      if (arr[end] !== '') break;\n    }\n\n    if (start > end) return [];\n    return arr.slice(start, end - start + 1);\n  }\n\n  var fromParts = trim(from.split('/'));\n  var toParts = trim(to.split('/'));\n\n  var length = Math.min(fromParts.length, toParts.length);\n  var samePartsLength = length;\n  for (var i = 0; i < length; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      samePartsLength = i;\n      break;\n    }\n  }\n\n  var outputParts = [];\n  for (var i = samePartsLength; i < fromParts.length; i++) {\n    outputParts.push('..');\n  }\n\n  outputParts = outputParts.concat(toParts.slice(samePartsLength));\n\n  return outputParts.join('/');\n};\n\nexports.sep = '/';\nexports.delimiter = ':';\n\nexports.dirname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  if (path.length === 0) return '.';\n  var code = path.charCodeAt(0);\n  var hasRoot = code === 47 /*/*/;\n  var end = -1;\n  var matchedSlash = true;\n  for (var i = path.length - 1; i >= 1; --i) {\n    code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n      // We saw the first non-path separator\n      matchedSlash = false;\n    }\n  }\n\n  if (end === -1) return hasRoot ? '/' : '.';\n  if (hasRoot && end === 1) {\n    // return '//';\n    // Backwards-compat fix:\n    return '/';\n  }\n  return path.slice(0, end);\n};\n\nfunction basename(path) {\n  if (typeof path !== 'string') path = path + '';\n\n  var start = 0;\n  var end = -1;\n  var matchedSlash = true;\n  var i;\n\n  for (i = path.length - 1; i >= 0; --i) {\n    if (path.charCodeAt(i) === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // path component\n      matchedSlash = false;\n      end = i + 1;\n    }\n  }\n\n  if (end === -1) return '';\n  return path.slice(start, end);\n}\n\n// Uses a mixed approach for backwards-compatibility, as ext behavior changed\n// in new Node.js versions, so only basename() above is backported here\nexports.basename = function (path, ext) {\n  var f = basename(path);\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\nexports.extname = function (path) {\n  if (typeof path !== 'string') path = path + '';\n  var startDot = -1;\n  var startPart = 0;\n  var end = -1;\n  var matchedSlash = true;\n  // Track the state of characters (if any) we see before our first dot and\n  // after any path separator we find\n  var preDotState = 0;\n  for (var i = path.length - 1; i >= 0; --i) {\n    var code = path.charCodeAt(i);\n    if (code === 47 /*/*/) {\n        // If we reached a path separator that was not part of a set of path\n        // separators at the end of the string, stop now\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n    if (end === -1) {\n      // We saw the first non-path separator, mark this as the end of our\n      // extension\n      matchedSlash = false;\n      end = i + 1;\n    }\n    if (code === 46 /*.*/) {\n        // If this is our first dot, mark it as the start of our extension\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n    } else if (startDot !== -1) {\n      // We saw a non-dot and non-path separator before our dot, so we should\n      // have a good chance at having a non-empty extension\n      preDotState = -1;\n    }\n  }\n\n  if (startDot === -1 || end === -1 ||\n      // We saw a non-dot character immediately before the dot\n      preDotState === 0 ||\n      // The (right-most) trimmed path component is exactly '..'\n      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n    return '';\n  }\n  return path.slice(startDot, end);\n};\n\nfunction filter (xs, f) {\n    if (xs.filter) return xs.filter(f);\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (f(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// String.prototype.substr - negative index don't work in IE8\nvar substr = 'ab'.substr(-1) === 'b'\n    ? function (str, start, len) { return str.substr(start, len) }\n    : function (str, start, len) {\n        if (start < 0) start = str.length + start;\n        return str.substr(start, len);\n    }\n;\n","module.exports = require('./lib/ffmpeg');","var when\t\t= require('when')\n  , fs\t\t\t= require('fs');\n\nvar errors\t\t= require('./errors')\n  , utils\t\t= require('./utils')\n  , configs\t\t= require('./configs')\n  , video\t\t= require('./video');\n\nvar ffmpeg = function (/* inputFilepath, settings, callback */) {\n\n\t/**\n\t * Retrieve the list of the codec supported by the ffmpeg software\n\t */\n\tvar _ffmpegInfoConfiguration = function (settings) {\n\t\t// New 'promise' instance \n\t\tvar deferred = when.defer();\n\t\t// Instance the new arrays for the format\n\t\tvar format = { modules : new Array(), encode : new Array(), decode : new Array() };\n\t\t// Make the call to retrieve information about the ffmpeg\n\t\tutils.exec(['ffmpeg','-formats','2>&1'], settings, function (error, stdout, stderr) {\n\t\t\t// Get the list of modules\n\t\t\tvar configuration = /configuration:(.*)/.exec(stdout);\n\t\t\t// Check if exists the configuration\n\t\t\tif (configuration) {\n\t\t\t\t// Get the list of modules\n\t\t\t\tvar modules = configuration[1].match(/--enable-([a-zA-Z0-9\\-]+)/g);\n\t\t\t\t// Scan all modules\n\t\t\t\tfor (var indexModule in modules) {\n\t\t\t\t\t// Add module to the list\n\t\t\t\t\tformat.modules.push(/--enable-([a-zA-Z0-9\\-]+)/.exec(modules[indexModule])[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Get the codec list\n\t\t\tvar codecList = stdout.match(/ (DE|D|E) (.*) {1,} (.*)/g);\n\t\t\t// Scan all codec\n\t\t\tfor (var i in codecList) {\n\t\t\t\t// Get the match value\n\t\t\t\tvar match = / (DE|D|E) (.*) {1,} (.*)/.exec(codecList[i]);\n\t\t\t\t// Check if match is valid\n\t\t\t\tif (match) {\n\t\t\t\t\t// Get the value from the match\n\t\t\t\t\tvar scope = match[1].replace(/\\s/g,'')\n\t\t\t\t\t  , extension = match[2].replace(/\\s/g,'');\n\t\t\t\t\t// Check which scope is best suited\n\t\t\t\t\tif (scope == 'D' || scope == 'DE')\n\t\t\t\t\t\tformat.decode.push(extension);\n\t\t\t\t\tif (scope == 'E' || scope == 'DE')\n\t\t\t\t\t\tformat.encode.push(extension);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Returns the list of supported formats\n\t\t\tdeferred.resolve(format);\n\t\t});\n\t\t// Return 'promise' instance \n\t\treturn deferred.promise;\n\t}\n\t\n\t/**\n\t * Get the video info\n\t */\n\tvar _videoInfo = function (fileInput, settings) {\n\t\t// New 'promise' instance \n\t\tvar deferred = when.defer();\n\t\t// Make the call to retrieve information about the ffmpeg\n\t\tutils.exec(['ffmpeg','-i',fileInput,'2>&1'], settings, function (error, stdout, stderr) {\n\t\t\t// Perse output for retrieve the file info\n\t\t\tvar filename\t\t= /from \\'(.*)\\'/.exec(stdout) || []\n\t\t\t  , title\t\t\t= /(INAM|title)\\s+:\\s(.+)/.exec(stdout) || []\n\t\t\t  , artist\t\t\t= /artist\\s+:\\s(.+)/.exec(stdout) || []\n\t\t\t  , album\t\t\t= /album\\s+:\\s(.+)/.exec(stdout) || []\n\t\t\t  , track\t\t\t= /track\\s+:\\s(.+)/.exec(stdout) || []\n\t\t\t  , date\t\t\t= /date\\s+:\\s(.+)/.exec(stdout) || []\n\t\t\t  , is_synched\t\t= (/start: 0.000000/.exec(stdout) !== null)\n\t\t\t  , duration\t\t= /Duration: (([0-9]+):([0-9]{2}):([0-9]{2}).([0-9]+))/.exec(stdout) || []\n\t\t\t  \n\t\t\t  , container\t\t= /Input #0, ([a-zA-Z0-9]+),/.exec(stdout) || []\n\t\t\t  , video_bitrate\t= /bitrate: ([0-9]+) kb\\/s/.exec(stdout) || []\n\t\t\t  , video_stream\t= /Stream #([0-9\\.]+)([a-z0-9\\(\\)\\[\\]]*)[:] Video/.exec(stdout) || []\n\t\t\t  , video_codec\t\t= /Video: ([\\w]+)/.exec(stdout) || []\n\t\t\t  , resolution\t\t= /(([0-9]{2,5})x([0-9]{2,5}))/.exec(stdout) || []\n\t\t\t  , pixel\t\t\t= /[SP]AR ([0-9\\:]+)/.exec(stdout) || []\n\t\t\t  , aspect\t\t\t= /DAR ([0-9\\:]+)/.exec(stdout) || []\n\t\t\t  , fps\t\t\t\t= /([0-9\\.]+) (fps|tb\\(r\\))/.exec(stdout) || []\n\t\t\t  \n\t\t\t  , audio_stream\t= /Stream #([0-9\\.]+)([a-z0-9\\(\\)\\[\\]]*)[:] Audio/.exec(stdout) || []\n\t\t\t  , audio_codec\t\t= /Audio: ([\\w]+)/.exec(stdout) || []\n\t\t\t  , sample_rate\t\t= /([0-9]+) Hz/i.exec(stdout) || []\n\t\t\t  , channels\t\t= /Audio:.* (stereo|mono)/.exec(stdout) || []\n\t\t\t  , audio_bitrate\t= /Audio:.* ([0-9]+) kb\\/s/.exec(stdout) || []\n\t\t\t  , rotate\t\t\t= /rotate[\\s]+:[\\s]([\\d]{2,3})/.exec(stdout) || [];\n\t\t\t// Build return object\n\t\t\tvar ret = { \n\t\t\t\tfilename\t\t: filename[1] || ''\n\t\t\t  , title\t\t\t: title[2] || ''\n\t\t\t  , artist\t\t\t: artist[1] || ''\n\t\t\t  , album\t\t\t: album[1] || ''\n\t\t\t  , track\t\t\t: track[1] || ''\n\t\t\t  , date\t\t\t: date[1] || ''\n\t\t\t  , synched\t\t\t: is_synched\n\t\t\t  , duration\t\t: {\n\t\t\t\t\traw\t\t: duration[1] || ''\n\t\t\t\t  , seconds\t: duration[1] ? utils.durationToSeconds(duration[1]) : 0\n\t\t\t\t}\n\t\t\t  , video\t\t\t: {\n\t\t\t\t\tcontainer\t\t\t: container[1] || ''\n\t\t\t\t  , bitrate\t\t\t\t: (video_bitrate.length > 1) ? parseInt(video_bitrate[1], 10) : 0\n\t\t\t\t  , stream\t\t\t\t: video_stream.length > 1 ? parseFloat(video_stream[1]) : 0.0\n\t\t\t\t  , codec\t\t\t\t: video_codec[1] || ''\n\t\t\t\t  , resolution\t\t\t: {\n\t\t\t\t\t\tw : resolution.length > 2 ? parseInt(resolution[2], 10) : 0\n\t\t\t\t\t  , h : resolution.length > 3 ? parseInt(resolution[3], 10) : 0\n\t\t\t\t\t}\n\t\t\t\t  , resolutionSquare\t: {}\n\t\t\t\t  , aspect\t\t\t\t: {}\n\t\t\t\t  , rotate\t\t\t\t: rotate.length > 1 ? parseInt(rotate[1], 10) : 0\n\t\t\t\t  , fps\t\t\t\t\t: fps.length > 1 ? parseFloat(fps[1]) : 0.0\n\t\t\t\t}\n\t\t\t  , audio\t\t\t: {\n\t\t\t\t\tcodec\t\t\t\t: audio_codec[1] || ''\n\t\t\t\t  , bitrate\t\t\t\t: audio_bitrate[1] || ''\n\t\t\t\t  , sample_rate\t\t\t: sample_rate.length > 1 ? parseInt(sample_rate[1], 10) : 0\n\t\t\t\t  , stream\t\t\t\t: audio_stream.length > 1 ? parseFloat(audio_stream[1]) : 0.0\n\t\t\t\t  , channels\t\t\t: {\n\t\t\t\t\t\traw\t\t: channels[1] || ''\n\t\t\t\t\t  , value\t: (channels.length > 0) ? ({ stereo : 2, mono : 1 }[channels[1]] || 0) : ''\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t// Check if exist aspect ratio\n\t\t\tif (aspect.length > 0) {\n\t\t\t\tvar aspectValue = aspect[1].split(\":\");\n\t\t\t\tret.video.aspect.x\t\t= parseInt(aspectValue[0], 10);\n\t\t\t\tret.video.aspect.y\t\t= parseInt(aspectValue[1], 10);\n\t\t\t\tret.video.aspect.string = aspect[1];\n\t\t\t\tret.video.aspect.value\t= parseFloat((ret.video.aspect.x / ret.video.aspect.y));\n\t\t\t} else {\n\t\t\t\t// If exists horizontal resolution then calculate aspect ratio\n\t\t\t\tif(ret.video.resolution.w > 0) {\n\t\t\t\t\tvar gcdValue = utils.gcd(ret.video.resolution.w, ret.video.resolution.h);\n\t\t\t\t\t// Calculate aspect ratio\n\t\t\t\t\tret.video.aspect.x\t\t= ret.video.resolution.w / gcdValue;\n\t\t\t\t\tret.video.aspect.y\t\t= ret.video.resolution.h / gcdValue;\n\t\t\t\t\tret.video.aspect.string = ret.video.aspect.x + ':' + ret.video.aspect.y;\n\t\t\t\t\tret.video.aspect.value\t= parseFloat((ret.video.aspect.x / ret.video.aspect.y));\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Save pixel ratio for output size calculation\n\t\t\tif (pixel.length > 0) {\n\t\t\t\tret.video.pixelString = pixel[1];\n\t\t\t\tvar pixelValue = pixel[1].split(\":\");\n\t\t\t\tret.video.pixel = parseFloat((parseInt(pixelValue[0], 10) / parseInt(pixelValue[1], 10)));\n\t\t\t} else {\n\t\t\t\tif (ret.video.resolution.w !== 0) {\n\t\t\t\t\tret.video.pixelString = '1:1';\n\t\t\t\t\tret.video.pixel = 1;\n\t\t\t\t} else {\n\t\t\t\t\tret.video.pixelString = '';\n\t\t\t\t\tret.video.pixel = 0.0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Correct video.resolution when pixel aspectratio is not 1\n\t\t\tif (ret.video.pixel !== 1 || ret.video.pixel !== 0) {\n\t\t\t\tif( ret.video.pixel > 1 ) {\n\t\t\t\t\tret.video.resolutionSquare.w = parseInt(ret.video.resolution.w * ret.video.pixel, 10);\n\t\t\t\t\tret.video.resolutionSquare.h = ret.video.resolution.h;\n\t\t\t\t} else {\n\t\t\t\t\tret.video.resolutionSquare.w = ret.video.resolution.w;\n\t\t\t\t\tret.video.resolutionSquare.h = parseInt(ret.video.resolution.h / ret.video.pixel, 10);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Returns the list of supported formats\n\t\t\tdeferred.resolve(ret);\n\t\t});\n\t\t// Return 'promise' instance \n\t\treturn deferred.promise;\n\t}\n\t\n\t/**\n\t * Get the info about ffmpeg's codec and about file\n\t */\n\tvar _getInformation = function (fileInput, settings) {\n\t\tvar deferreds = [];\n\t\t// Add promise\n\t\tdeferreds.push(_ffmpegInfoConfiguration(settings));\n\t\tdeferreds.push(_videoInfo(fileInput, settings));\n\t\t// Return defer\n\t\treturn when.all(deferreds);\n\t}\n\n\tvar __constructor = function (args) {\n\t\t// Check if exist at least one option\n\t\tif (args.length == 0 || args[0] == undefined)\n\t\t\tthrow errors.renderError('empty_input_filepath');\n\t\t// Check if first argument is a string\n\t\tif (typeof args[0] != 'string')\n\t\t\tthrow errors.renderError('input_filepath_must_be_string');\n\t\t// Get the input filepath\n\t\tvar inputFilepath = args[0];\n\t\t// Check if file exist\n\t\tif (!fs.existsSync(inputFilepath))\n\t\t\tthrow errors.renderError('fileinput_not_exist');\n\t\t\n\t\t// New instance of the base configuration\n\t\tvar settings = new configs();\n\t\t// Callback to call\n\t\tvar callback = null;\n\t\t\n\t\t// Scan all arguments\n\t\tfor (var i = 1; i < args.length; i++) {\n\t\t\t// Check the type of variable\n\t\t\tswitch (typeof args[i]) {\n\t\t\t\tcase 'object' :\n\t\t\t\t\tutils.mergeObject(settings, args[i]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'function' :\n\t\t\t\t\tcallback = args[i];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Building the value for return value. Check if the callback is not a function. In this case will created a new instance of the deferred class\n\t\tvar deferred = typeof callback != 'function' ? when.defer() : { promise : null };\n\t\t\n\t\twhen(_getInformation(inputFilepath, settings), function (data) {\n\t\t\t// Check if the callback is a function\n\t\t\tif (typeof callback == 'function') {\n\t\t\t\t// Call the callback function e return the new instance of 'video' class\n\t\t\t\tcallback(null, new video(inputFilepath, settings, data[0], data[1]));\n\t\t\t} else {\n\t\t\t\t// Positive response\n\t\t\t\tdeferred.resolve(new video(inputFilepath, settings, data[0], data[1]));\n\t\t\t}\n\t\t}, function (error) {\n\t\t\t// Check if the callback is a function\n\t\t\tif (typeof callback == 'function') {\n\t\t\t\t// Call the callback function e return the error found\n\t\t\t\tcallback(error, null);\n\t\t\t} else {\n\t\t\t\t// Negative response\n\t\t\t\tdeferred.reject(error);\n\t\t\t}\n\t\t});\n\t\t\n\t\t// Return a possible promise instance\n\t\treturn deferred.promise;\n\t}\n\n\treturn __constructor.call(this, arguments);\n};\n\nmodule.exports = ffmpeg;","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar env = require('../env');\n\tvar TimeoutError = require('../TimeoutError');\n\n\tfunction setTimeout(f, ms, x, y) {\n\t\treturn env.setTimer(function() {\n\t\t\tf(x, y, ms);\n\t\t}, ms);\n\t}\n\n\treturn function timed(Promise) {\n\t\t/**\n\t\t * Return a new promise whose fulfillment value is revealed only\n\t\t * after ms milliseconds\n\t\t * @param {number} ms milliseconds\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.delay = function(ms) {\n\t\t\tvar p = this._beget();\n\t\t\tthis._handler.fold(handleDelay, ms, void 0, p._handler);\n\t\t\treturn p;\n\t\t};\n\n\t\tfunction handleDelay(ms, x, h) {\n\t\t\tsetTimeout(resolveDelay, ms, x, h);\n\t\t}\n\n\t\tfunction resolveDelay(x, h) {\n\t\t\th.resolve(x);\n\t\t}\n\n\t\t/**\n\t\t * Return a new promise that rejects after ms milliseconds unless\n\t\t * this promise fulfills earlier, in which case the returned promise\n\t\t * fulfills with the same value.\n\t\t * @param {number} ms milliseconds\n\t\t * @param {Error|*=} reason optional rejection reason to use, defaults\n\t\t *   to a TimeoutError if not provided\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.timeout = function(ms, reason) {\n\t\t\tvar p = this._beget();\n\t\t\tvar h = p._handler;\n\n\t\t\tvar t = setTimeout(onTimeout, ms, reason, p._handler);\n\n\t\t\tthis._handler.visit(h,\n\t\t\t\tfunction onFulfill(x) {\n\t\t\t\t\tenv.clearTimer(t);\n\t\t\t\t\tthis.resolve(x); // this = h\n\t\t\t\t},\n\t\t\t\tfunction onReject(x) {\n\t\t\t\t\tenv.clearTimer(t);\n\t\t\t\t\tthis.reject(x); // this = h\n\t\t\t\t},\n\t\t\t\th.notify);\n\n\t\t\treturn p;\n\t\t};\n\n\t\tfunction onTimeout(reason, h, ms) {\n\t\t\tvar e = typeof reason === 'undefined'\n\t\t\t\t? new TimeoutError('timed out after ' + ms + 'ms')\n\t\t\t\t: reason;\n\t\t\th.reject(e);\n\t\t}\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar state = require('../state');\n\tvar applier = require('../apply');\n\n\treturn function array(Promise) {\n\n\t\tvar applyFold = applier(Promise);\n\t\tvar toPromise = Promise.resolve;\n\t\tvar all = Promise.all;\n\n\t\tvar ar = Array.prototype.reduce;\n\t\tvar arr = Array.prototype.reduceRight;\n\t\tvar slice = Array.prototype.slice;\n\n\t\t// Additional array combinators\n\n\t\tPromise.any = any;\n\t\tPromise.some = some;\n\t\tPromise.settle = settle;\n\n\t\tPromise.map = map;\n\t\tPromise.filter = filter;\n\t\tPromise.reduce = reduce;\n\t\tPromise.reduceRight = reduceRight;\n\n\t\t/**\n\t\t * When this promise fulfills with an array, do\n\t\t * onFulfilled.apply(void 0, array)\n\t\t * @param {function} onFulfilled function to apply\n\t\t * @returns {Promise} promise for the result of applying onFulfilled\n\t\t */\n\t\tPromise.prototype.spread = function(onFulfilled) {\n\t\t\treturn this.then(all).then(function(array) {\n\t\t\t\treturn onFulfilled.apply(this, array);\n\t\t\t});\n\t\t};\n\n\t\treturn Promise;\n\n\t\t/**\n\t\t * One-winner competitive race.\n\t\t * Return a promise that will fulfill when one of the promises\n\t\t * in the input array fulfills, or will reject when all promises\n\t\t * have rejected.\n\t\t * @param {array} promises\n\t\t * @returns {Promise} promise for the first fulfilled value\n\t\t */\n\t\tfunction any(promises) {\n\t\t\tvar p = Promise._defer();\n\t\t\tvar resolver = p._handler;\n\t\t\tvar l = promises.length>>>0;\n\n\t\t\tvar pending = l;\n\t\t\tvar errors = [];\n\n\t\t\tfor (var h, x, i = 0; i < l; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif(x === void 0 && !(i in promises)) {\n\t\t\t\t\t--pending;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\th = Promise._handler(x);\n\t\t\t\tif(h.state() > 0) {\n\t\t\t\t\tresolver.become(h);\n\t\t\t\t\tPromise._visitRemaining(promises, i, h);\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\th.visit(resolver, handleFulfill, handleReject);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(pending === 0) {\n\t\t\t\tresolver.reject(new RangeError('any(): array must not be empty'));\n\t\t\t}\n\n\t\t\treturn p;\n\n\t\t\tfunction handleFulfill(x) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\terrors = null;\n\t\t\t\tthis.resolve(x); // this === resolver\n\t\t\t}\n\n\t\t\tfunction handleReject(e) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\tif(this.resolved) { // this === resolver\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\terrors.push(e);\n\t\t\t\tif(--pending === 0) {\n\t\t\t\t\tthis.reject(errors);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * N-winner competitive race\n\t\t * Return a promise that will fulfill when n input promises have\n\t\t * fulfilled, or will reject when it becomes impossible for n\n\t\t * input promises to fulfill (ie when promises.length - n + 1\n\t\t * have rejected)\n\t\t * @param {array} promises\n\t\t * @param {number} n\n\t\t * @returns {Promise} promise for the earliest n fulfillment values\n\t\t *\n\t\t * @deprecated\n\t\t */\n\t\tfunction some(promises, n) {\n\t\t\t/*jshint maxcomplexity:7*/\n\t\t\tvar p = Promise._defer();\n\t\t\tvar resolver = p._handler;\n\n\t\t\tvar results = [];\n\t\t\tvar errors = [];\n\n\t\t\tvar l = promises.length>>>0;\n\t\t\tvar nFulfill = 0;\n\t\t\tvar nReject;\n\t\t\tvar x, i; // reused in both for() loops\n\n\t\t\t// First pass: count actual array items\n\t\t\tfor(i=0; i<l; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif(x === void 0 && !(i in promises)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t++nFulfill;\n\t\t\t}\n\n\t\t\t// Compute actual goals\n\t\t\tn = Math.max(n, 0);\n\t\t\tnReject = (nFulfill - n + 1);\n\t\t\tnFulfill = Math.min(n, nFulfill);\n\n\t\t\tif(n > nFulfill) {\n\t\t\t\tresolver.reject(new RangeError('some(): array must contain at least '\n\t\t\t\t+ n + ' item(s), but had ' + nFulfill));\n\t\t\t} else if(nFulfill === 0) {\n\t\t\t\tresolver.resolve(results);\n\t\t\t}\n\n\t\t\t// Second pass: observe each array item, make progress toward goals\n\t\t\tfor(i=0; i<l; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif(x === void 0 && !(i in promises)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tPromise._handler(x).visit(resolver, fulfill, reject, resolver.notify);\n\t\t\t}\n\n\t\t\treturn p;\n\n\t\t\tfunction fulfill(x) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\tif(this.resolved) { // this === resolver\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresults.push(x);\n\t\t\t\tif(--nFulfill === 0) {\n\t\t\t\t\terrors = null;\n\t\t\t\t\tthis.resolve(results);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction reject(e) {\n\t\t\t\t/*jshint validthis:true*/\n\t\t\t\tif(this.resolved) { // this === resolver\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\terrors.push(e);\n\t\t\t\tif(--nReject === 0) {\n\t\t\t\t\tresults = null;\n\t\t\t\t\tthis.reject(errors);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Apply f to the value of each promise in a list of promises\n\t\t * and return a new list containing the results.\n\t\t * @param {array} promises\n\t\t * @param {function(x:*, index:Number):*} f mapping function\n\t\t * @returns {Promise}\n\t\t */\n\t\tfunction map(promises, f) {\n\t\t\treturn Promise._traverse(f, promises);\n\t\t}\n\n\t\t/**\n\t\t * Filter the provided array of promises using the provided predicate.  Input may\n\t\t * contain promises and values\n\t\t * @param {Array} promises array of promises and values\n\t\t * @param {function(x:*, index:Number):boolean} predicate filtering predicate.\n\t\t *  Must return truthy (or promise for truthy) for items to retain.\n\t\t * @returns {Promise} promise that will fulfill with an array containing all items\n\t\t *  for which predicate returned truthy.\n\t\t */\n\t\tfunction filter(promises, predicate) {\n\t\t\tvar a = slice.call(promises);\n\t\t\treturn Promise._traverse(predicate, a).then(function(keep) {\n\t\t\t\treturn filterSync(a, keep);\n\t\t\t});\n\t\t}\n\n\t\tfunction filterSync(promises, keep) {\n\t\t\t// Safe because we know all promises have fulfilled if we've made it this far\n\t\t\tvar l = keep.length;\n\t\t\tvar filtered = new Array(l);\n\t\t\tfor(var i=0, j=0; i<l; ++i) {\n\t\t\t\tif(keep[i]) {\n\t\t\t\t\tfiltered[j++] = Promise._handler(promises[i]).value;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfiltered.length = j;\n\t\t\treturn filtered;\n\n\t\t}\n\n\t\t/**\n\t\t * Return a promise that will always fulfill with an array containing\n\t\t * the outcome states of all input promises.  The returned promise\n\t\t * will never reject.\n\t\t * @param {Array} promises\n\t\t * @returns {Promise} promise for array of settled state descriptors\n\t\t */\n\t\tfunction settle(promises) {\n\t\t\treturn all(promises.map(settleOne));\n\t\t}\n\n\t\tfunction settleOne(p) {\n\t\t\t// Optimize the case where we get an already-resolved when.js promise\n\t\t\t//  by extracting its state:\n\t\t\tvar handler;\n\t\t\tif (p instanceof Promise) {\n\t\t\t\t// This is our own Promise type and we can reach its handler internals:\n\t\t\t\thandler = p._handler.join();\n\t\t\t}\n\t\t\tif((handler && handler.state() === 0) || !handler) {\n\t\t\t\t// Either still pending, or not a Promise at all:\n\t\t\t\treturn toPromise(p).then(state.fulfilled, state.rejected);\n\t\t\t}\n\n\t\t\t// The promise is our own, but it is already resolved. Take a shortcut.\n\t\t\t// Since we're not actually handling the resolution, we need to disable\n\t\t\t// rejection reporting.\n\t\t\thandler._unreport();\n\t\t\treturn state.inspect(handler);\n\t\t}\n\n\t\t/**\n\t\t * Traditional reduce function, similar to `Array.prototype.reduce()`, but\n\t\t * input may contain promises and/or values, and reduceFunc\n\t\t * may return either a value or a promise, *and* initialValue may\n\t\t * be a promise for the starting value.\n\t\t * @param {Array|Promise} promises array or promise for an array of anything,\n\t\t *      may contain a mix of promises and values.\n\t\t * @param {function(accumulated:*, x:*, index:Number):*} f reduce function\n\t\t * @returns {Promise} that will resolve to the final reduced value\n\t\t */\n\t\tfunction reduce(promises, f /*, initialValue */) {\n\t\t\treturn arguments.length > 2 ? ar.call(promises, liftCombine(f), arguments[2])\n\t\t\t\t\t: ar.call(promises, liftCombine(f));\n\t\t}\n\n\t\t/**\n\t\t * Traditional reduce function, similar to `Array.prototype.reduceRight()`, but\n\t\t * input may contain promises and/or values, and reduceFunc\n\t\t * may return either a value or a promise, *and* initialValue may\n\t\t * be a promise for the starting value.\n\t\t * @param {Array|Promise} promises array or promise for an array of anything,\n\t\t *      may contain a mix of promises and values.\n\t\t * @param {function(accumulated:*, x:*, index:Number):*} f reduce function\n\t\t * @returns {Promise} that will resolve to the final reduced value\n\t\t */\n\t\tfunction reduceRight(promises, f /*, initialValue */) {\n\t\t\treturn arguments.length > 2 ? arr.call(promises, liftCombine(f), arguments[2])\n\t\t\t\t\t: arr.call(promises, liftCombine(f));\n\t\t}\n\n\t\tfunction liftCombine(f) {\n\t\t\treturn function(z, x, i) {\n\t\t\t\treturn applyFold(f, void 0, [z,x,i]);\n\t\t\t};\n\t\t}\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function flow(Promise) {\n\n\t\tvar resolve = Promise.resolve;\n\t\tvar reject = Promise.reject;\n\t\tvar origCatch = Promise.prototype['catch'];\n\n\t\t/**\n\t\t * Handle the ultimate fulfillment value or rejection reason, and assume\n\t\t * responsibility for all errors.  If an error propagates out of result\n\t\t * or handleFatalError, it will be rethrown to the host, resulting in a\n\t\t * loud stack track on most platforms and a crash on some.\n\t\t * @param {function?} onResult\n\t\t * @param {function?} onError\n\t\t * @returns {undefined}\n\t\t */\n\t\tPromise.prototype.done = function(onResult, onError) {\n\t\t\tthis._handler.visit(this._handler.receiver, onResult, onError);\n\t\t};\n\n\t\t/**\n\t\t * Add Error-type and predicate matching to catch.  Examples:\n\t\t * promise.catch(TypeError, handleTypeError)\n\t\t *   .catch(predicate, handleMatchedErrors)\n\t\t *   .catch(handleRemainingErrors)\n\t\t * @param onRejected\n\t\t * @returns {*}\n\t\t */\n\t\tPromise.prototype['catch'] = Promise.prototype.otherwise = function(onRejected) {\n\t\t\tif (arguments.length < 2) {\n\t\t\t\treturn origCatch.call(this, onRejected);\n\t\t\t}\n\n\t\t\tif(typeof onRejected !== 'function') {\n\t\t\t\treturn this.ensure(rejectInvalidPredicate);\n\t\t\t}\n\n\t\t\treturn origCatch.call(this, createCatchFilter(arguments[1], onRejected));\n\t\t};\n\n\t\t/**\n\t\t * Wraps the provided catch handler, so that it will only be called\n\t\t * if the predicate evaluates truthy\n\t\t * @param {?function} handler\n\t\t * @param {function} predicate\n\t\t * @returns {function} conditional catch handler\n\t\t */\n\t\tfunction createCatchFilter(handler, predicate) {\n\t\t\treturn function(e) {\n\t\t\t\treturn evaluatePredicate(e, predicate)\n\t\t\t\t\t? handler.call(this, e)\n\t\t\t\t\t: reject(e);\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Ensures that onFulfilledOrRejected will be called regardless of whether\n\t\t * this promise is fulfilled or rejected.  onFulfilledOrRejected WILL NOT\n\t\t * receive the promises' value or reason.  Any returned value will be disregarded.\n\t\t * onFulfilledOrRejected may throw or return a rejected promise to signal\n\t\t * an additional error.\n\t\t * @param {function} handler handler to be called regardless of\n\t\t *  fulfillment or rejection\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype['finally'] = Promise.prototype.ensure = function(handler) {\n\t\t\tif(typeof handler !== 'function') {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\treturn this.then(function(x) {\n\t\t\t\treturn runSideEffect(handler, this, identity, x);\n\t\t\t}, function(e) {\n\t\t\t\treturn runSideEffect(handler, this, reject, e);\n\t\t\t});\n\t\t};\n\n\t\tfunction runSideEffect (handler, thisArg, propagate, value) {\n\t\t\tvar result = handler.call(thisArg);\n\t\t\treturn maybeThenable(result)\n\t\t\t\t? propagateValue(result, propagate, value)\n\t\t\t\t: propagate(value);\n\t\t}\n\n\t\tfunction propagateValue (result, propagate, x) {\n\t\t\treturn resolve(result).then(function () {\n\t\t\t\treturn propagate(x);\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Recover from a failure by returning a defaultValue.  If defaultValue\n\t\t * is a promise, it's fulfillment value will be used.  If defaultValue is\n\t\t * a promise that rejects, the returned promise will reject with the\n\t\t * same reason.\n\t\t * @param {*} defaultValue\n\t\t * @returns {Promise} new promise\n\t\t */\n\t\tPromise.prototype['else'] = Promise.prototype.orElse = function(defaultValue) {\n\t\t\treturn this.then(void 0, function() {\n\t\t\t\treturn defaultValue;\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Shortcut for .then(function() { return value; })\n\t\t * @param  {*} value\n\t\t * @return {Promise} a promise that:\n\t\t *  - is fulfilled if value is not a promise, or\n\t\t *  - if value is a promise, will fulfill with its value, or reject\n\t\t *    with its reason.\n\t\t */\n\t\tPromise.prototype['yield'] = function(value) {\n\t\t\treturn this.then(function() {\n\t\t\t\treturn value;\n\t\t\t});\n\t\t};\n\n\t\t/**\n\t\t * Runs a side effect when this promise fulfills, without changing the\n\t\t * fulfillment value.\n\t\t * @param {function} onFulfilledSideEffect\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.tap = function(onFulfilledSideEffect) {\n\t\t\treturn this.then(onFulfilledSideEffect)['yield'](this);\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n\tfunction rejectInvalidPredicate() {\n\t\tthrow new TypeError('catch predicate must be a function');\n\t}\n\n\tfunction evaluatePredicate(e, predicate) {\n\t\treturn isError(predicate) ? e instanceof predicate : predicate(e);\n\t}\n\n\tfunction isError(predicate) {\n\t\treturn predicate === Error\n\t\t\t|| (predicate != null && predicate.prototype instanceof Error);\n\t}\n\n\tfunction maybeThenable(x) {\n\t\treturn (typeof x === 'object' || typeof x === 'function') && x !== null;\n\t}\n\n\tfunction identity(x) {\n\t\treturn x;\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n/** @author Jeff Escalante */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function fold(Promise) {\n\n\t\tPromise.prototype.fold = function(f, z) {\n\t\t\tvar promise = this._beget();\n\n\t\t\tthis._handler.fold(function(z, x, to) {\n\t\t\t\tPromise._handler(z).fold(function(x, z, to) {\n\t\t\t\t\tto.resolve(f.call(this, z, x));\n\t\t\t\t}, x, this, to);\n\t\t\t}, z, promise._handler.receiver, promise._handler);\n\n\t\t\treturn promise;\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar inspect = require('../state').inspect;\n\n\treturn function inspection(Promise) {\n\n\t\tPromise.prototype.inspect = function() {\n\t\t\treturn inspect(Promise._handler(this));\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function generate(Promise) {\n\n\t\tvar resolve = Promise.resolve;\n\n\t\tPromise.iterate = iterate;\n\t\tPromise.unfold = unfold;\n\n\t\treturn Promise;\n\n\t\t/**\n\t\t * @deprecated Use github.com/cujojs/most streams and most.iterate\n\t\t * Generate a (potentially infinite) stream of promised values:\n\t\t * x, f(x), f(f(x)), etc. until condition(x) returns true\n\t\t * @param {function} f function to generate a new x from the previous x\n\t\t * @param {function} condition function that, given the current x, returns\n\t\t *  truthy when the iterate should stop\n\t\t * @param {function} handler function to handle the value produced by f\n\t\t * @param {*|Promise} x starting value, may be a promise\n\t\t * @return {Promise} the result of the last call to f before\n\t\t *  condition returns true\n\t\t */\n\t\tfunction iterate(f, condition, handler, x) {\n\t\t\treturn unfold(function(x) {\n\t\t\t\treturn [x, f(x)];\n\t\t\t}, condition, handler, x);\n\t\t}\n\n\t\t/**\n\t\t * @deprecated Use github.com/cujojs/most streams and most.unfold\n\t\t * Generate a (potentially infinite) stream of promised values\n\t\t * by applying handler(generator(seed)) iteratively until\n\t\t * condition(seed) returns true.\n\t\t * @param {function} unspool function that generates a [value, newSeed]\n\t\t *  given a seed.\n\t\t * @param {function} condition function that, given the current seed, returns\n\t\t *  truthy when the unfold should stop\n\t\t * @param {function} handler function to handle the value produced by unspool\n\t\t * @param x {*|Promise} starting value, may be a promise\n\t\t * @return {Promise} the result of the last value produced by unspool before\n\t\t *  condition returns true\n\t\t */\n\t\tfunction unfold(unspool, condition, handler, x) {\n\t\t\treturn resolve(x).then(function(seed) {\n\t\t\t\treturn resolve(condition(seed)).then(function(done) {\n\t\t\t\t\treturn done ? seed : resolve(unspool(seed)).spread(next);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tfunction next(item, newSeed) {\n\t\t\t\treturn resolve(handler(item)).then(function() {\n\t\t\t\t\treturn unfold(unspool, condition, handler, newSeed);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function progress(Promise) {\n\n\t\t/**\n\t\t * @deprecated\n\t\t * Register a progress handler for this promise\n\t\t * @param {function} onProgress\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype.progress = function(onProgress) {\n\t\t\treturn this.then(void 0, void 0, onProgress);\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function addWith(Promise) {\n\t\t/**\n\t\t * Returns a promise whose handlers will be called with `this` set to\n\t\t * the supplied receiver.  Subsequent promises derived from the\n\t\t * returned promise will also have their handlers called with receiver\n\t\t * as `this`. Calling `with` with undefined or no arguments will return\n\t\t * a promise whose handlers will again be called in the usual Promises/A+\n\t\t * way (no `this`) thus safely undoing any previous `with` in the\n\t\t * promise chain.\n\t\t *\n\t\t * WARNING: Promises returned from `with`/`withThis` are NOT Promises/A+\n\t\t * compliant, specifically violating 2.2.5 (http://promisesaplus.com/#point-41)\n\t\t *\n\t\t * @param {object} receiver `this` value for all handlers attached to\n\t\t *  the returned promise.\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype['with'] = Promise.prototype.withThis = function(receiver) {\n\t\t\tvar p = this._beget();\n\t\t\tvar child = p._handler;\n\t\t\tchild.receiver = receiver;\n\t\t\tthis._handler.chain(child, receiver);\n\t\t\treturn p;\n\t\t};\n\n\t\treturn Promise;\n\t};\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function(require) {\n\n\tvar setTimer = require('../env').setTimer;\n\tvar format = require('../format');\n\n\treturn function unhandledRejection(Promise) {\n\n\t\tvar logError = noop;\n\t\tvar logInfo = noop;\n\t\tvar localConsole;\n\n\t\tif(typeof console !== 'undefined') {\n\t\t\t// Alias console to prevent things like uglify's drop_console option from\n\t\t\t// removing console.log/error. Unhandled rejections fall into the same\n\t\t\t// category as uncaught exceptions, and build tools shouldn't silence them.\n\t\t\tlocalConsole = console;\n\t\t\tlogError = typeof localConsole.error !== 'undefined'\n\t\t\t\t? function (e) { localConsole.error(e); }\n\t\t\t\t: function (e) { localConsole.log(e); };\n\n\t\t\tlogInfo = typeof localConsole.info !== 'undefined'\n\t\t\t\t? function (e) { localConsole.info(e); }\n\t\t\t\t: function (e) { localConsole.log(e); };\n\t\t}\n\n\t\tPromise.onPotentiallyUnhandledRejection = function(rejection) {\n\t\t\tenqueue(report, rejection);\n\t\t};\n\n\t\tPromise.onPotentiallyUnhandledRejectionHandled = function(rejection) {\n\t\t\tenqueue(unreport, rejection);\n\t\t};\n\n\t\tPromise.onFatalRejection = function(rejection) {\n\t\t\tenqueue(throwit, rejection.value);\n\t\t};\n\n\t\tvar tasks = [];\n\t\tvar reported = [];\n\t\tvar running = null;\n\n\t\tfunction report(r) {\n\t\t\tif(!r.handled) {\n\t\t\t\treported.push(r);\n\t\t\t\tlogError('Potentially unhandled rejection [' + r.id + '] ' + format.formatError(r.value));\n\t\t\t}\n\t\t}\n\n\t\tfunction unreport(r) {\n\t\t\tvar i = reported.indexOf(r);\n\t\t\tif(i >= 0) {\n\t\t\t\treported.splice(i, 1);\n\t\t\t\tlogInfo('Handled previous rejection [' + r.id + '] ' + format.formatObject(r.value));\n\t\t\t}\n\t\t}\n\n\t\tfunction enqueue(f, x) {\n\t\t\ttasks.push(f, x);\n\t\t\tif(running === null) {\n\t\t\t\trunning = setTimer(flush, 0);\n\t\t\t}\n\t\t}\n\n\t\tfunction flush() {\n\t\t\trunning = null;\n\t\t\twhile(tasks.length > 0) {\n\t\t\t\ttasks.shift()(tasks.shift());\n\t\t\t}\n\t\t}\n\n\t\treturn Promise;\n\t};\n\n\tfunction throwit(e) {\n\t\tthrow e;\n\t}\n\n\tfunction noop() {}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(require); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn {\n\t\tformatError: formatError,\n\t\tformatObject: formatObject,\n\t\ttryStringify: tryStringify\n\t};\n\n\t/**\n\t * Format an error into a string.  If e is an Error and has a stack property,\n\t * it's returned.  Otherwise, e is formatted using formatObject, with a\n\t * warning added about e not being a proper Error.\n\t * @param {*} e\n\t * @returns {String} formatted string, suitable for output to developers\n\t */\n\tfunction formatError(e) {\n\t\tvar s = typeof e === 'object' && e !== null && (e.stack || e.message) ? e.stack || e.message : formatObject(e);\n\t\treturn e instanceof Error ? s : s + ' (WARNING: non-Error used)';\n\t}\n\n\t/**\n\t * Format an object, detecting \"plain\" objects and running them through\n\t * JSON.stringify if possible.\n\t * @param {Object} o\n\t * @returns {string}\n\t */\n\tfunction formatObject(o) {\n\t\tvar s = String(o);\n\t\tif(s === '[object Object]' && typeof JSON !== 'undefined') {\n\t\t\ts = tryStringify(o, s);\n\t\t}\n\t\treturn s;\n\t}\n\n\t/**\n\t * Try to return the result of JSON.stringify(x).  If that fails, return\n\t * defaultValue\n\t * @param {*} x\n\t * @param {*} defaultValue\n\t * @returns {String|*} JSON.stringify(x) or defaultValue\n\t */\n\tfunction tryStringify(x, defaultValue) {\n\t\ttry {\n\t\t\treturn JSON.stringify(x);\n\t\t} catch(e) {\n\t\t\treturn defaultValue;\n\t\t}\n\t}\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function (require) {\n\n\tvar makePromise = require('./makePromise');\n\tvar Scheduler = require('./Scheduler');\n\tvar async = require('./env').asap;\n\n\treturn makePromise({\n\t\tscheduler: new Scheduler(async)\n\t});\n\n});\n})(typeof define === 'function' && define.amd ? define : function (factory) { module.exports = factory(require); });\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\treturn function makePromise(environment) {\n\n\t\tvar tasks = environment.scheduler;\n\t\tvar emitRejection = initEmitRejection();\n\n\t\tvar objectCreate = Object.create ||\n\t\t\tfunction(proto) {\n\t\t\t\tfunction Child() {}\n\t\t\t\tChild.prototype = proto;\n\t\t\t\treturn new Child();\n\t\t\t};\n\n\t\t/**\n\t\t * Create a promise whose fate is determined by resolver\n\t\t * @constructor\n\t\t * @returns {Promise} promise\n\t\t * @name Promise\n\t\t */\n\t\tfunction Promise(resolver, handler) {\n\t\t\tthis._handler = resolver === Handler ? handler : init(resolver);\n\t\t}\n\n\t\t/**\n\t\t * Run the supplied resolver\n\t\t * @param resolver\n\t\t * @returns {Pending}\n\t\t */\n\t\tfunction init(resolver) {\n\t\t\tvar handler = new Pending();\n\n\t\t\ttry {\n\t\t\t\tresolver(promiseResolve, promiseReject, promiseNotify);\n\t\t\t} catch (e) {\n\t\t\t\tpromiseReject(e);\n\t\t\t}\n\n\t\t\treturn handler;\n\n\t\t\t/**\n\t\t\t * Transition from pre-resolution state to post-resolution state, notifying\n\t\t\t * all listeners of the ultimate fulfillment or rejection\n\t\t\t * @param {*} x resolution value\n\t\t\t */\n\t\t\tfunction promiseResolve (x) {\n\t\t\t\thandler.resolve(x);\n\t\t\t}\n\t\t\t/**\n\t\t\t * Reject this promise with reason, which will be used verbatim\n\t\t\t * @param {Error|*} reason rejection reason, strongly suggested\n\t\t\t *   to be an Error type\n\t\t\t */\n\t\t\tfunction promiseReject (reason) {\n\t\t\t\thandler.reject(reason);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @deprecated\n\t\t\t * Issue a progress event, notifying all progress listeners\n\t\t\t * @param {*} x progress event payload to pass to all listeners\n\t\t\t */\n\t\t\tfunction promiseNotify (x) {\n\t\t\t\thandler.notify(x);\n\t\t\t}\n\t\t}\n\n\t\t// Creation\n\n\t\tPromise.resolve = resolve;\n\t\tPromise.reject = reject;\n\t\tPromise.never = never;\n\n\t\tPromise._defer = defer;\n\t\tPromise._handler = getHandler;\n\n\t\t/**\n\t\t * Returns a trusted promise. If x is already a trusted promise, it is\n\t\t * returned, otherwise returns a new trusted Promise which follows x.\n\t\t * @param  {*} x\n\t\t * @return {Promise} promise\n\t\t */\n\t\tfunction resolve(x) {\n\t\t\treturn isPromise(x) ? x\n\t\t\t\t: new Promise(Handler, new Async(getHandler(x)));\n\t\t}\n\n\t\t/**\n\t\t * Return a reject promise with x as its reason (x is used verbatim)\n\t\t * @param {*} x\n\t\t * @returns {Promise} rejected promise\n\t\t */\n\t\tfunction reject(x) {\n\t\t\treturn new Promise(Handler, new Async(new Rejected(x)));\n\t\t}\n\n\t\t/**\n\t\t * Return a promise that remains pending forever\n\t\t * @returns {Promise} forever-pending promise.\n\t\t */\n\t\tfunction never() {\n\t\t\treturn foreverPendingPromise; // Should be frozen\n\t\t}\n\n\t\t/**\n\t\t * Creates an internal {promise, resolver} pair\n\t\t * @private\n\t\t * @returns {Promise}\n\t\t */\n\t\tfunction defer() {\n\t\t\treturn new Promise(Handler, new Pending());\n\t\t}\n\n\t\t// Transformation and flow control\n\n\t\t/**\n\t\t * Transform this promise's fulfillment value, returning a new Promise\n\t\t * for the transformed result.  If the promise cannot be fulfilled, onRejected\n\t\t * is called with the reason.  onProgress *may* be called with updates toward\n\t\t * this promise's fulfillment.\n\t\t * @param {function=} onFulfilled fulfillment handler\n\t\t * @param {function=} onRejected rejection handler\n\t\t * @param {function=} onProgress @deprecated progress handler\n\t\t * @return {Promise} new promise\n\t\t */\n\t\tPromise.prototype.then = function(onFulfilled, onRejected, onProgress) {\n\t\t\tvar parent = this._handler;\n\t\t\tvar state = parent.join().state();\n\n\t\t\tif ((typeof onFulfilled !== 'function' && state > 0) ||\n\t\t\t\t(typeof onRejected !== 'function' && state < 0)) {\n\t\t\t\t// Short circuit: value will not change, simply share handler\n\t\t\t\treturn new this.constructor(Handler, parent);\n\t\t\t}\n\n\t\t\tvar p = this._beget();\n\t\t\tvar child = p._handler;\n\n\t\t\tparent.chain(child, parent.receiver, onFulfilled, onRejected, onProgress);\n\n\t\t\treturn p;\n\t\t};\n\n\t\t/**\n\t\t * If this promise cannot be fulfilled due to an error, call onRejected to\n\t\t * handle the error. Shortcut for .then(undefined, onRejected)\n\t\t * @param {function?} onRejected\n\t\t * @return {Promise}\n\t\t */\n\t\tPromise.prototype['catch'] = function(onRejected) {\n\t\t\treturn this.then(void 0, onRejected);\n\t\t};\n\n\t\t/**\n\t\t * Creates a new, pending promise of the same type as this promise\n\t\t * @private\n\t\t * @returns {Promise}\n\t\t */\n\t\tPromise.prototype._beget = function() {\n\t\t\treturn begetFrom(this._handler, this.constructor);\n\t\t};\n\n\t\tfunction begetFrom(parent, Promise) {\n\t\t\tvar child = new Pending(parent.receiver, parent.join().context);\n\t\t\treturn new Promise(Handler, child);\n\t\t}\n\n\t\t// Array combinators\n\n\t\tPromise.all = all;\n\t\tPromise.race = race;\n\t\tPromise._traverse = traverse;\n\n\t\t/**\n\t\t * Return a promise that will fulfill when all promises in the\n\t\t * input array have fulfilled, or will reject when one of the\n\t\t * promises rejects.\n\t\t * @param {array} promises array of promises\n\t\t * @returns {Promise} promise for array of fulfillment values\n\t\t */\n\t\tfunction all(promises) {\n\t\t\treturn traverseWith(snd, null, promises);\n\t\t}\n\n\t\t/**\n\t\t * Array<Promise<X>> -> Promise<Array<f(X)>>\n\t\t * @private\n\t\t * @param {function} f function to apply to each promise's value\n\t\t * @param {Array} promises array of promises\n\t\t * @returns {Promise} promise for transformed values\n\t\t */\n\t\tfunction traverse(f, promises) {\n\t\t\treturn traverseWith(tryCatch2, f, promises);\n\t\t}\n\n\t\tfunction traverseWith(tryMap, f, promises) {\n\t\t\tvar handler = typeof f === 'function' ? mapAt : settleAt;\n\n\t\t\tvar resolver = new Pending();\n\t\t\tvar pending = promises.length >>> 0;\n\t\t\tvar results = new Array(pending);\n\n\t\t\tfor (var i = 0, x; i < promises.length && !resolver.resolved; ++i) {\n\t\t\t\tx = promises[i];\n\n\t\t\t\tif (x === void 0 && !(i in promises)) {\n\t\t\t\t\t--pending;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\ttraverseAt(promises, handler, i, x, resolver);\n\t\t\t}\n\n\t\t\tif(pending === 0) {\n\t\t\t\tresolver.become(new Fulfilled(results));\n\t\t\t}\n\n\t\t\treturn new Promise(Handler, resolver);\n\n\t\t\tfunction mapAt(i, x, resolver) {\n\t\t\t\tif(!resolver.resolved) {\n\t\t\t\t\ttraverseAt(promises, settleAt, i, tryMap(f, x, i), resolver);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction settleAt(i, x, resolver) {\n\t\t\t\tresults[i] = x;\n\t\t\t\tif(--pending === 0) {\n\t\t\t\t\tresolver.become(new Fulfilled(results));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction traverseAt(promises, handler, i, x, resolver) {\n\t\t\tif (maybeThenable(x)) {\n\t\t\t\tvar h = getHandlerMaybeThenable(x);\n\t\t\t\tvar s = h.state();\n\n\t\t\t\tif (s === 0) {\n\t\t\t\t\th.fold(handler, i, void 0, resolver);\n\t\t\t\t} else if (s > 0) {\n\t\t\t\t\thandler(i, h.value, resolver);\n\t\t\t\t} else {\n\t\t\t\t\tresolver.become(h);\n\t\t\t\t\tvisitRemaining(promises, i+1, h);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thandler(i, x, resolver);\n\t\t\t}\n\t\t}\n\n\t\tPromise._visitRemaining = visitRemaining;\n\t\tfunction visitRemaining(promises, start, handler) {\n\t\t\tfor(var i=start; i<promises.length; ++i) {\n\t\t\t\tmarkAsHandled(getHandler(promises[i]), handler);\n\t\t\t}\n\t\t}\n\n\t\tfunction markAsHandled(h, handler) {\n\t\t\tif(h === handler) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar s = h.state();\n\t\t\tif(s === 0) {\n\t\t\t\th.visit(h, void 0, h._unreport);\n\t\t\t} else if(s < 0) {\n\t\t\t\th._unreport();\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Fulfill-reject competitive race. Return a promise that will settle\n\t\t * to the same state as the earliest input promise to settle.\n\t\t *\n\t\t * WARNING: The ES6 Promise spec requires that race()ing an empty array\n\t\t * must return a promise that is pending forever.  This implementation\n\t\t * returns a singleton forever-pending promise, the same singleton that is\n\t\t * returned by Promise.never(), thus can be checked with ===\n\t\t *\n\t\t * @param {array} promises array of promises to race\n\t\t * @returns {Promise} if input is non-empty, a promise that will settle\n\t\t * to the same outcome as the earliest input promise to settle. if empty\n\t\t * is empty, returns a promise that will never settle.\n\t\t */\n\t\tfunction race(promises) {\n\t\t\tif(typeof promises !== 'object' || promises === null) {\n\t\t\t\treturn reject(new TypeError('non-iterable passed to race()'));\n\t\t\t}\n\n\t\t\t// Sigh, race([]) is untestable unless we return *something*\n\t\t\t// that is recognizable without calling .then() on it.\n\t\t\treturn promises.length === 0 ? never()\n\t\t\t\t : promises.length === 1 ? resolve(promises[0])\n\t\t\t\t : runRace(promises);\n\t\t}\n\n\t\tfunction runRace(promises) {\n\t\t\tvar resolver = new Pending();\n\t\t\tvar i, x, h;\n\t\t\tfor(i=0; i<promises.length; ++i) {\n\t\t\t\tx = promises[i];\n\t\t\t\tif (x === void 0 && !(i in promises)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\th = getHandler(x);\n\t\t\t\tif(h.state() !== 0) {\n\t\t\t\t\tresolver.become(h);\n\t\t\t\t\tvisitRemaining(promises, i+1, h);\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\th.visit(resolver, resolver.resolve, resolver.reject);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new Promise(Handler, resolver);\n\t\t}\n\n\t\t// Promise internals\n\t\t// Below this, everything is @private\n\n\t\t/**\n\t\t * Get an appropriate handler for x, without checking for cycles\n\t\t * @param {*} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandler(x) {\n\t\t\tif(isPromise(x)) {\n\t\t\t\treturn x._handler.join();\n\t\t\t}\n\t\t\treturn maybeThenable(x) ? getHandlerUntrusted(x) : new Fulfilled(x);\n\t\t}\n\n\t\t/**\n\t\t * Get a handler for thenable x.\n\t\t * NOTE: You must only call this if maybeThenable(x) == true\n\t\t * @param {object|function|Promise} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandlerMaybeThenable(x) {\n\t\t\treturn isPromise(x) ? x._handler.join() : getHandlerUntrusted(x);\n\t\t}\n\n\t\t/**\n\t\t * Get a handler for potentially untrusted thenable x\n\t\t * @param {*} x\n\t\t * @returns {object} handler\n\t\t */\n\t\tfunction getHandlerUntrusted(x) {\n\t\t\ttry {\n\t\t\t\tvar untrustedThen = x.then;\n\t\t\t\treturn typeof untrustedThen === 'function'\n\t\t\t\t\t? new Thenable(untrustedThen, x)\n\t\t\t\t\t: new Fulfilled(x);\n\t\t\t} catch(e) {\n\t\t\t\treturn new Rejected(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Handler for a promise that is pending forever\n\t\t * @constructor\n\t\t */\n\t\tfunction Handler() {}\n\n\t\tHandler.prototype.when\n\t\t\t= Handler.prototype.become\n\t\t\t= Handler.prototype.notify // deprecated\n\t\t\t= Handler.prototype.fail\n\t\t\t= Handler.prototype._unreport\n\t\t\t= Handler.prototype._report\n\t\t\t= noop;\n\n\t\tHandler.prototype._state = 0;\n\n\t\tHandler.prototype.state = function() {\n\t\t\treturn this._state;\n\t\t};\n\n\t\t/**\n\t\t * Recursively collapse handler chain to find the handler\n\t\t * nearest to the fully resolved value.\n\t\t * @returns {object} handler nearest the fully resolved value\n\t\t */\n\t\tHandler.prototype.join = function() {\n\t\t\tvar h = this;\n\t\t\twhile(h.handler !== void 0) {\n\t\t\t\th = h.handler;\n\t\t\t}\n\t\t\treturn h;\n\t\t};\n\n\t\tHandler.prototype.chain = function(to, receiver, fulfilled, rejected, progress) {\n\t\t\tthis.when({\n\t\t\t\tresolver: to,\n\t\t\t\treceiver: receiver,\n\t\t\t\tfulfilled: fulfilled,\n\t\t\t\trejected: rejected,\n\t\t\t\tprogress: progress\n\t\t\t});\n\t\t};\n\n\t\tHandler.prototype.visit = function(receiver, fulfilled, rejected, progress) {\n\t\t\tthis.chain(failIfRejected, receiver, fulfilled, rejected, progress);\n\t\t};\n\n\t\tHandler.prototype.fold = function(f, z, c, to) {\n\t\t\tthis.when(new Fold(f, z, c, to));\n\t\t};\n\n\t\t/**\n\t\t * Handler that invokes fail() on any handler it becomes\n\t\t * @constructor\n\t\t */\n\t\tfunction FailIfRejected() {}\n\n\t\tinherit(Handler, FailIfRejected);\n\n\t\tFailIfRejected.prototype.become = function(h) {\n\t\t\th.fail();\n\t\t};\n\n\t\tvar failIfRejected = new FailIfRejected();\n\n\t\t/**\n\t\t * Handler that manages a queue of consumers waiting on a pending promise\n\t\t * @constructor\n\t\t */\n\t\tfunction Pending(receiver, inheritedContext) {\n\t\t\tPromise.createContext(this, inheritedContext);\n\n\t\t\tthis.consumers = void 0;\n\t\t\tthis.receiver = receiver;\n\t\t\tthis.handler = void 0;\n\t\t\tthis.resolved = false;\n\t\t}\n\n\t\tinherit(Handler, Pending);\n\n\t\tPending.prototype._state = 0;\n\n\t\tPending.prototype.resolve = function(x) {\n\t\t\tthis.become(getHandler(x));\n\t\t};\n\n\t\tPending.prototype.reject = function(x) {\n\t\t\tif(this.resolved) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.become(new Rejected(x));\n\t\t};\n\n\t\tPending.prototype.join = function() {\n\t\t\tif (!this.resolved) {\n\t\t\t\treturn this;\n\t\t\t}\n\n\t\t\tvar h = this;\n\n\t\t\twhile (h.handler !== void 0) {\n\t\t\t\th = h.handler;\n\t\t\t\tif (h === this) {\n\t\t\t\t\treturn this.handler = cycle();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn h;\n\t\t};\n\n\t\tPending.prototype.run = function() {\n\t\t\tvar q = this.consumers;\n\t\t\tvar handler = this.handler;\n\t\t\tthis.handler = this.handler.join();\n\t\t\tthis.consumers = void 0;\n\n\t\t\tfor (var i = 0; i < q.length; ++i) {\n\t\t\t\thandler.when(q[i]);\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.become = function(handler) {\n\t\t\tif(this.resolved) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.resolved = true;\n\t\t\tthis.handler = handler;\n\t\t\tif(this.consumers !== void 0) {\n\t\t\t\ttasks.enqueue(this);\n\t\t\t}\n\n\t\t\tif(this.context !== void 0) {\n\t\t\t\thandler._report(this.context);\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.when = function(continuation) {\n\t\t\tif(this.resolved) {\n\t\t\t\ttasks.enqueue(new ContinuationTask(continuation, this.handler));\n\t\t\t} else {\n\t\t\t\tif(this.consumers === void 0) {\n\t\t\t\t\tthis.consumers = [continuation];\n\t\t\t\t} else {\n\t\t\t\t\tthis.consumers.push(continuation);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * @deprecated\n\t\t */\n\t\tPending.prototype.notify = function(x) {\n\t\t\tif(!this.resolved) {\n\t\t\t\ttasks.enqueue(new ProgressTask(x, this));\n\t\t\t}\n\t\t};\n\n\t\tPending.prototype.fail = function(context) {\n\t\t\tvar c = typeof context === 'undefined' ? this.context : context;\n\t\t\tthis.resolved && this.handler.join().fail(c);\n\t\t};\n\n\t\tPending.prototype._report = function(context) {\n\t\t\tthis.resolved && this.handler.join()._report(context);\n\t\t};\n\n\t\tPending.prototype._unreport = function() {\n\t\t\tthis.resolved && this.handler.join()._unreport();\n\t\t};\n\n\t\t/**\n\t\t * Wrap another handler and force it into a future stack\n\t\t * @param {object} handler\n\t\t * @constructor\n\t\t */\n\t\tfunction Async(handler) {\n\t\t\tthis.handler = handler;\n\t\t}\n\n\t\tinherit(Handler, Async);\n\n\t\tAsync.prototype.when = function(continuation) {\n\t\t\ttasks.enqueue(new ContinuationTask(continuation, this));\n\t\t};\n\n\t\tAsync.prototype._report = function(context) {\n\t\t\tthis.join()._report(context);\n\t\t};\n\n\t\tAsync.prototype._unreport = function() {\n\t\t\tthis.join()._unreport();\n\t\t};\n\n\t\t/**\n\t\t * Handler that wraps an untrusted thenable and assimilates it in a future stack\n\t\t * @param {function} then\n\t\t * @param {{then: function}} thenable\n\t\t * @constructor\n\t\t */\n\t\tfunction Thenable(then, thenable) {\n\t\t\tPending.call(this);\n\t\t\ttasks.enqueue(new AssimilateTask(then, thenable, this));\n\t\t}\n\n\t\tinherit(Pending, Thenable);\n\n\t\t/**\n\t\t * Handler for a fulfilled promise\n\t\t * @param {*} x fulfillment value\n\t\t * @constructor\n\t\t */\n\t\tfunction Fulfilled(x) {\n\t\t\tPromise.createContext(this);\n\t\t\tthis.value = x;\n\t\t}\n\n\t\tinherit(Handler, Fulfilled);\n\n\t\tFulfilled.prototype._state = 1;\n\n\t\tFulfilled.prototype.fold = function(f, z, c, to) {\n\t\t\trunContinuation3(f, z, this, c, to);\n\t\t};\n\n\t\tFulfilled.prototype.when = function(cont) {\n\t\t\trunContinuation1(cont.fulfilled, this, cont.receiver, cont.resolver);\n\t\t};\n\n\t\tvar errorId = 0;\n\n\t\t/**\n\t\t * Handler for a rejected promise\n\t\t * @param {*} x rejection reason\n\t\t * @constructor\n\t\t */\n\t\tfunction Rejected(x) {\n\t\t\tPromise.createContext(this);\n\n\t\t\tthis.id = ++errorId;\n\t\t\tthis.value = x;\n\t\t\tthis.handled = false;\n\t\t\tthis.reported = false;\n\n\t\t\tthis._report();\n\t\t}\n\n\t\tinherit(Handler, Rejected);\n\n\t\tRejected.prototype._state = -1;\n\n\t\tRejected.prototype.fold = function(f, z, c, to) {\n\t\t\tto.become(this);\n\t\t};\n\n\t\tRejected.prototype.when = function(cont) {\n\t\t\tif(typeof cont.rejected === 'function') {\n\t\t\t\tthis._unreport();\n\t\t\t}\n\t\t\trunContinuation1(cont.rejected, this, cont.receiver, cont.resolver);\n\t\t};\n\n\t\tRejected.prototype._report = function(context) {\n\t\t\ttasks.afterQueue(new ReportTask(this, context));\n\t\t};\n\n\t\tRejected.prototype._unreport = function() {\n\t\t\tif(this.handled) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.handled = true;\n\t\t\ttasks.afterQueue(new UnreportTask(this));\n\t\t};\n\n\t\tRejected.prototype.fail = function(context) {\n\t\t\tthis.reported = true;\n\t\t\temitRejection('unhandledRejection', this);\n\t\t\tPromise.onFatalRejection(this, context === void 0 ? this.context : context);\n\t\t};\n\n\t\tfunction ReportTask(rejection, context) {\n\t\t\tthis.rejection = rejection;\n\t\t\tthis.context = context;\n\t\t}\n\n\t\tReportTask.prototype.run = function() {\n\t\t\tif(!this.rejection.handled && !this.rejection.reported) {\n\t\t\t\tthis.rejection.reported = true;\n\t\t\t\temitRejection('unhandledRejection', this.rejection) ||\n\t\t\t\t\tPromise.onPotentiallyUnhandledRejection(this.rejection, this.context);\n\t\t\t}\n\t\t};\n\n\t\tfunction UnreportTask(rejection) {\n\t\t\tthis.rejection = rejection;\n\t\t}\n\n\t\tUnreportTask.prototype.run = function() {\n\t\t\tif(this.rejection.reported) {\n\t\t\t\temitRejection('rejectionHandled', this.rejection) ||\n\t\t\t\t\tPromise.onPotentiallyUnhandledRejectionHandled(this.rejection);\n\t\t\t}\n\t\t};\n\n\t\t// Unhandled rejection hooks\n\t\t// By default, everything is a noop\n\n\t\tPromise.createContext\n\t\t\t= Promise.enterContext\n\t\t\t= Promise.exitContext\n\t\t\t= Promise.onPotentiallyUnhandledRejection\n\t\t\t= Promise.onPotentiallyUnhandledRejectionHandled\n\t\t\t= Promise.onFatalRejection\n\t\t\t= noop;\n\n\t\t// Errors and singletons\n\n\t\tvar foreverPendingHandler = new Handler();\n\t\tvar foreverPendingPromise = new Promise(Handler, foreverPendingHandler);\n\n\t\tfunction cycle() {\n\t\t\treturn new Rejected(new TypeError('Promise cycle'));\n\t\t}\n\n\t\t// Task runners\n\n\t\t/**\n\t\t * Run a single consumer\n\t\t * @constructor\n\t\t */\n\t\tfunction ContinuationTask(continuation, handler) {\n\t\t\tthis.continuation = continuation;\n\t\t\tthis.handler = handler;\n\t\t}\n\n\t\tContinuationTask.prototype.run = function() {\n\t\t\tthis.handler.join().when(this.continuation);\n\t\t};\n\n\t\t/**\n\t\t * Run a queue of progress handlers\n\t\t * @constructor\n\t\t */\n\t\tfunction ProgressTask(value, handler) {\n\t\t\tthis.handler = handler;\n\t\t\tthis.value = value;\n\t\t}\n\n\t\tProgressTask.prototype.run = function() {\n\t\t\tvar q = this.handler.consumers;\n\t\t\tif(q === void 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (var c, i = 0; i < q.length; ++i) {\n\t\t\t\tc = q[i];\n\t\t\t\trunNotify(c.progress, this.value, this.handler, c.receiver, c.resolver);\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Assimilate a thenable, sending it's value to resolver\n\t\t * @param {function} then\n\t\t * @param {object|function} thenable\n\t\t * @param {object} resolver\n\t\t * @constructor\n\t\t */\n\t\tfunction AssimilateTask(then, thenable, resolver) {\n\t\t\tthis._then = then;\n\t\t\tthis.thenable = thenable;\n\t\t\tthis.resolver = resolver;\n\t\t}\n\n\t\tAssimilateTask.prototype.run = function() {\n\t\t\tvar h = this.resolver;\n\t\t\ttryAssimilate(this._then, this.thenable, _resolve, _reject, _notify);\n\n\t\t\tfunction _resolve(x) { h.resolve(x); }\n\t\t\tfunction _reject(x)  { h.reject(x); }\n\t\t\tfunction _notify(x)  { h.notify(x); }\n\t\t};\n\n\t\tfunction tryAssimilate(then, thenable, resolve, reject, notify) {\n\t\t\ttry {\n\t\t\t\tthen.call(thenable, resolve, reject, notify);\n\t\t\t} catch (e) {\n\t\t\t\treject(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Fold a handler value with z\n\t\t * @constructor\n\t\t */\n\t\tfunction Fold(f, z, c, to) {\n\t\t\tthis.f = f; this.z = z; this.c = c; this.to = to;\n\t\t\tthis.resolver = failIfRejected;\n\t\t\tthis.receiver = this;\n\t\t}\n\n\t\tFold.prototype.fulfilled = function(x) {\n\t\t\tthis.f.call(this.c, this.z, x, this.to);\n\t\t};\n\n\t\tFold.prototype.rejected = function(x) {\n\t\t\tthis.to.reject(x);\n\t\t};\n\n\t\tFold.prototype.progress = function(x) {\n\t\t\tthis.to.notify(x);\n\t\t};\n\n\t\t// Other helpers\n\n\t\t/**\n\t\t * @param {*} x\n\t\t * @returns {boolean} true iff x is a trusted Promise\n\t\t */\n\t\tfunction isPromise(x) {\n\t\t\treturn x instanceof Promise;\n\t\t}\n\n\t\t/**\n\t\t * Test just enough to rule out primitives, in order to take faster\n\t\t * paths in some code\n\t\t * @param {*} x\n\t\t * @returns {boolean} false iff x is guaranteed *not* to be a thenable\n\t\t */\n\t\tfunction maybeThenable(x) {\n\t\t\treturn (typeof x === 'object' || typeof x === 'function') && x !== null;\n\t\t}\n\n\t\tfunction runContinuation1(f, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.become(h);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReject(f, h.value, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\tfunction runContinuation3(f, x, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.become(h);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReject3(f, x, h.value, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\t/**\n\t\t * @deprecated\n\t\t */\n\t\tfunction runNotify(f, x, h, receiver, next) {\n\t\t\tif(typeof f !== 'function') {\n\t\t\t\treturn next.notify(x);\n\t\t\t}\n\n\t\t\tPromise.enterContext(h);\n\t\t\ttryCatchReturn(f, x, receiver, next);\n\t\t\tPromise.exitContext();\n\t\t}\n\n\t\tfunction tryCatch2(f, a, b) {\n\t\t\ttry {\n\t\t\t\treturn f(a, b);\n\t\t\t} catch(e) {\n\t\t\t\treturn reject(e);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Return f.call(thisArg, x), or if it throws return a rejected promise for\n\t\t * the thrown exception\n\t\t */\n\t\tfunction tryCatchReject(f, x, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tnext.become(getHandler(f.call(thisArg, x)));\n\t\t\t} catch(e) {\n\t\t\t\tnext.become(new Rejected(e));\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Same as above, but includes the extra argument parameter.\n\t\t */\n\t\tfunction tryCatchReject3(f, x, y, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tf.call(thisArg, x, y, next);\n\t\t\t} catch(e) {\n\t\t\t\tnext.become(new Rejected(e));\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * @deprecated\n\t\t * Return f.call(thisArg, x), or if it throws, *return* the exception\n\t\t */\n\t\tfunction tryCatchReturn(f, x, thisArg, next) {\n\t\t\ttry {\n\t\t\t\tnext.notify(f.call(thisArg, x));\n\t\t\t} catch(e) {\n\t\t\t\tnext.notify(e);\n\t\t\t}\n\t\t}\n\n\t\tfunction inherit(Parent, Child) {\n\t\t\tChild.prototype = objectCreate(Parent.prototype);\n\t\t\tChild.prototype.constructor = Child;\n\t\t}\n\n\t\tfunction snd(x, y) {\n\t\t\treturn y;\n\t\t}\n\n\t\tfunction noop() {}\n\n\t\tfunction hasCustomEvent() {\n\t\t\tif(typeof CustomEvent === 'function') {\n\t\t\t\ttry {\n\t\t\t\t\tvar ev = new CustomEvent('unhandledRejection');\n\t\t\t\t\treturn ev instanceof CustomEvent;\n\t\t\t\t} catch (ignoredException) {}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction hasInternetExplorerCustomEvent() {\n\t\t\tif(typeof document !== 'undefined' && typeof document.createEvent === 'function') {\n\t\t\t\ttry {\n\t\t\t\t\t// Try to create one event to make sure it's supported\n\t\t\t\t\tvar ev = document.createEvent('CustomEvent');\n\t\t\t\t\tev.initCustomEvent('eventType', false, true, {});\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (ignoredException) {}\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction initEmitRejection() {\n\t\t\t/*global process, self, CustomEvent*/\n\t\t\tif(typeof process !== 'undefined' && process !== null\n\t\t\t\t&& typeof process.emit === 'function') {\n\t\t\t\t// Returning falsy here means to call the default\n\t\t\t\t// onPotentiallyUnhandledRejection API.  This is safe even in\n\t\t\t\t// browserify since process.emit always returns falsy in browserify:\n\t\t\t\t// https://github.com/defunctzombie/node-process/blob/master/browser.js#L40-L46\n\t\t\t\treturn function(type, rejection) {\n\t\t\t\t\treturn type === 'unhandledRejection'\n\t\t\t\t\t\t? process.emit(type, rejection.value, rejection)\n\t\t\t\t\t\t: process.emit(type, rejection);\n\t\t\t\t};\n\t\t\t} else if(typeof self !== 'undefined' && hasCustomEvent()) {\n\t\t\t\treturn (function (self, CustomEvent) {\n\t\t\t\t\treturn function (type, rejection) {\n\t\t\t\t\t\tvar ev = new CustomEvent(type, {\n\t\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\t\treason: rejection.value,\n\t\t\t\t\t\t\t\tkey: rejection\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbubbles: false,\n\t\t\t\t\t\t\tcancelable: true\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn !self.dispatchEvent(ev);\n\t\t\t\t\t};\n\t\t\t\t}(self, CustomEvent));\n\t\t\t} else if(typeof self !== 'undefined' && hasInternetExplorerCustomEvent()) {\n\t\t\t\treturn (function(self, document) {\n\t\t\t\t\treturn function(type, rejection) {\n\t\t\t\t\t\tvar ev = document.createEvent('CustomEvent');\n\t\t\t\t\t\tev.initCustomEvent(type, false, true, {\n\t\t\t\t\t\t\treason: rejection.value,\n\t\t\t\t\t\t\tkey: rejection\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn !self.dispatchEvent(ev);\n\t\t\t\t\t};\n\t\t\t\t}(self, document));\n\t\t\t}\n\n\t\t\treturn noop;\n\t\t}\n\n\t\treturn Promise;\n\t};\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","/** @license MIT License (c) copyright 2010-2014 original author or authors */\n/** @author Brian Cavalier */\n/** @author John Hann */\n\n(function(define) { 'use strict';\ndefine(function() {\n\n\t// Credit to Twisol (https://github.com/Twisol) for suggesting\n\t// this type of extensible queue + trampoline approach for next-tick conflation.\n\n\t/**\n\t * Async task scheduler\n\t * @param {function} async function to schedule a single async function\n\t * @constructor\n\t */\n\tfunction Scheduler(async) {\n\t\tthis._async = async;\n\t\tthis._running = false;\n\n\t\tthis._queue = this;\n\t\tthis._queueLen = 0;\n\t\tthis._afterQueue = {};\n\t\tthis._afterQueueLen = 0;\n\n\t\tvar self = this;\n\t\tthis.drain = function() {\n\t\t\tself._drain();\n\t\t};\n\t}\n\n\t/**\n\t * Enqueue a task\n\t * @param {{ run:function }} task\n\t */\n\tScheduler.prototype.enqueue = function(task) {\n\t\tthis._queue[this._queueLen++] = task;\n\t\tthis.run();\n\t};\n\n\t/**\n\t * Enqueue a task to run after the main task queue\n\t * @param {{ run:function }} task\n\t */\n\tScheduler.prototype.afterQueue = function(task) {\n\t\tthis._afterQueue[this._afterQueueLen++] = task;\n\t\tthis.run();\n\t};\n\n\tScheduler.prototype.run = function() {\n\t\tif (!this._running) {\n\t\t\tthis._running = true;\n\t\t\tthis._async(this.drain);\n\t\t}\n\t};\n\n\t/**\n\t * Drain the handler queue entirely, and then the after queue\n\t */\n\tScheduler.prototype._drain = function() {\n\t\tvar i = 0;\n\t\tfor (; i < this._queueLen; ++i) {\n\t\t\tthis._queue[i].run();\n\t\t\tthis._queue[i] = void 0;\n\t\t}\n\n\t\tthis._queueLen = 0;\n\t\tthis._running = false;\n\n\t\tfor (i = 0; i < this._afterQueueLen; ++i) {\n\t\t\tthis._afterQueue[i].run();\n\t\t\tthis._afterQueue[i] = void 0;\n\t\t}\n\n\t\tthis._afterQueueLen = 0;\n\t};\n\n\treturn Scheduler;\n\n});\n}(typeof define === 'function' && define.amd ? define : function(factory) { module.exports = factory(); }));\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","/**\n * Basic configuration\n */\nmodule.exports = function () {\n\tthis.encoding\t= 'utf8';\n\tthis.timeout\t= 0;\n\tthis.maxBuffer\t= 200 * 1024\n}","var fs\t\t\t= require('fs')\n  , path\t\t= require('path')\n  , when\t\t= require('when');\n\nvar errors\t\t= require('./errors')\n  , presets\t\t= require('./presets')\n  , utils\t\t= require('./utils');\n\nmodule.exports = function (filePath, settings, infoConfiguration, infoFile) {\n\t\n\t// Public info about file and ffmpeg configuration\n\tthis.file_path\t\t\t\t= filePath;\n\tthis.info_configuration\t\t= infoConfiguration;\n\tthis.metadata\t\t\t\t= infoFile;\n\t\n\t// Commands for building the ffmpeg string conversion\n\tvar commands\t\t= new Array()\n\t  , inputs\t\t\t= new Array()\n\t  , filtersComlpex\t= new Array()\n\t  , output\t\t\t= null;\n\t\n\t// List of options generated from setting functions\n\tvar options\t\t\t= new Object();\n\t\n\t/*****************************************/\n\t/* FUNCTION FOR FILL THE COMMANDS OBJECT */\n\t/*****************************************/\n\t\n\t/**\n\t * Add a command to be bundled into the ffmpeg command call\n\t */\n\tthis.addCommand = function (command, argument) {\n\t\t// Check if exists the current command\n\t\tif (utils.in_array(command, commands) === false) {\n\t\t\t// Add the new command\n\t\t\tcommands.push(command);\n\t\t\t// Add the argument to new command\n\t\t\tif (argument != undefined)\n\t\t\t\tcommands.push(argument);\n\t\t} else \n\t\t\tthrow errors.renderError('command_already_exists', command);\n\t}\n\t\n\t/**\n\t * Add an input stream\n\t */\n\tthis.addInput = function (argument) {\n\t\tinputs.push(argument);\n\t}\n\t\n\t/**\n\t * Add a filter complex\n\t */\n\tthis.addFilterComplex = function (argument) {\n\t\tfiltersComlpex.push(argument);\n\t}\n\t\n\t/**\n\t * Set the output path\n\t */\n\tvar setOutput = function (path) {\n\t\toutput = path;\n\t}\n\t\n\t/*********************/\n\t/* SETTING FUNCTIONS */\n\t/*********************/\n\t\n\t/**\n\t * Disables audio encoding\n\t */\n\tthis.setDisableAudio = function () {\n\t\tif (options.audio == undefined)\n\t\t\toptions.audio = new Object();\n\t\t// Set the new option\n\t\toptions.audio.disabled = true;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Disables video encoding\n\t */\n\tthis.setDisableVideo = function () {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t// Set the new option\n\t\toptions.video.disabled = true;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the new video format\n\t */\n\tthis.setVideoFormat = function (format) {\n\t\t// Check if the format is supported by ffmpeg version\n\t\tif (this.info_configuration.encode.indexOf(format) != -1) {\n\t\t\tif (options.video == undefined)\n\t\t\t\toptions.video = new Object();\n\t\t\t// Set the new option\n\t\t\toptions.video.format = format;\n\t\t\treturn this;\n\t\t} else \n\t\t\tthrow errors.renderError('format_not_supported', format);\n\t}\n\t\n\t/**\n\t * Sets the new audio codec\n\t */\n\tthis.setVideoCodec = function (codec) {\n\t\t// Check if the codec is supported by ffmpeg version\n\t\tif (this.info_configuration.encode.indexOf(codec) != -1) {\n\t\t\tif (options.video == undefined)\n\t\t\t\toptions.video = new Object();\n\t\t\t// Set the new option\n\t\t\toptions.video.codec = codec;\n\t\t\treturn this;\n\t\t} else \n\t\t\tthrow errors.renderError('codec_not_supported', codec);\n\t}\n\t\n\t/**\n\t * Sets the video bitrate\n\t */\n\tthis.setVideoBitRate = function (bitrate) {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t// Set the new option\n\t\toptions.video.bitrate = bitrate;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the framerate of the video\n\t */\n\tthis.setVideoFrameRate = function (framerate) {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t// Set the new option\n\t\toptions.video.framerate = framerate;\n\t\treturn this;\t\t\n\t}\n\t\n\t/**\n\t * Sets the start time\n\t */\n\tthis.setVideoStartTime = function (time) {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t\n\t\t// Check if time is a string that contain: hours, minutes and seconds\n\t\tif (isNaN(time) && /([0-9]+):([0-9]{2}):([0-9]{2})/.exec(time)) {\n\t\t\ttime = utils.durationToSeconds(time);\t\t\t\n\t\t} else if (!isNaN(time) && parseInt(time) == time) {\n\t\t\ttime = parseInt(time, 10);\t\t\t\n\t\t} else {\n\t\t\ttime = 0;\t\t\t\n\t\t}\n\n\t\t// Set the new option\n\t\toptions.video.startTime = time;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the duration\n\t */\n\tthis.setVideoDuration = function (duration) {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t\n\t\t// Check if duration is a string that contain: hours, minutes and seconds\n\t\tif (isNaN(duration) && /([0-9]+):([0-9]{2}):([0-9]{2})/.exec(duration)) {\n\t\t\tduration = utils.durationToSeconds(duration);\n\t\t} else if (!isNaN(duration) && parseInt(duration) == duration) {\n\t\t\tduration = parseInt(duration, 10);\t\t\t\n\t\t} else {\n\t\t\tduration = 0;\n\t\t}\n\n\t\t// Set the new option\n\t\toptions.video.duration = duration;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the new aspetc ratio\n\t */\n\tthis.setVideoAspectRatio = function (aspect) {\n\t\t// Check if aspect is a string\n\t\tif (isNaN(aspect)) {\n\t\t\t// Check if aspet is string xx:xx\n\t\t\tif (/([0-9]+):([0-9]+)/.exec(aspect)) {\n\t\t\t\tvar check = /([0-9]+):([0-9]+)/.exec(aspect);\n\t\t\t\taspect = parseFloat((check[1] / check[2]));\n\t\t\t} else {\n\t\t\t\taspect = this.metadata.video.aspect.value;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t// Set the new option\n\t\toptions.video.aspect = aspect;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Set the size of the video\n\t */\n\tthis.setVideoSize = function (size, keepPixelAspectRatio, keepAspectRatio, paddingColor) {\n\t\tif (options.video == undefined)\n\t\t\toptions.video = new Object();\n\t\t// Set the new option\n\t\toptions.video.size = size;\n\t\toptions.video.keepPixelAspectRatio = keepPixelAspectRatio;\n\t\toptions.video.keepAspectRatio = keepAspectRatio;\n\t\toptions.video.paddingColor = paddingColor;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the new audio codec\n\t */\n\tthis.setAudioCodec = function (codec) {\n\t\t// Check if the codec is supported by ffmpeg version\n\t\tif (this.info_configuration.encode.indexOf(codec) != -1) {\n\t\t\t// Check if codec is equal 'MP3' and check if the version of ffmpeg support the libmp3lame function\n\t\t\tif (codec == 'mp3' && this.info_configuration.modules.indexOf('libmp3lame') != -1)\n\t\t\t\tcodec = 'libmp3lame';\n\t\t\t\n\t\t\tif (options.audio == undefined)\n\t\t\t\toptions.audio = new Object();\n\t\t\t// Set the new option\n\t\t\toptions.audio.codec = codec;\n\t\t\treturn this;\n\t\t} else \n\t\t\tthrow errors.renderError('codec_not_supported', codec);\n\t}\n\t\n\t/**\n\t * Sets the audio sample frequency for audio outputs\n\t */\n\tthis.setAudioFrequency = function (frequency) {\n\t\tif (options.audio == undefined)\n\t\t\toptions.audio = new Object();\n\t\t// Set the new option\n\t\toptions.audio.frequency = frequency;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the number of audio channels\n\t */\n\tthis.setAudioChannels = function (channel) {\n\t\t// Check if the channel value is valid\n\t\tif (presets.audio_channel.stereo == channel || presets.audio_channel.mono == channel) {\n\t\t\tif (options.audio == undefined)\n\t\t\t\toptions.audio = new Object();\n\t\t\t// Set the new option\n\t\t\toptions.audio.channel = channel;\n\t\t\treturn this;\t\t\t\n\t\t} else \n\t\t\tthrow errors.renderError('audio_channel_is_invalid', channel);\n\t}\n\t\n\t/**\n\t * Sets the audio bitrate\n\t */\n\tthis.setAudioBitRate = function (bitrate) {\n\t\tif (options.audio == undefined)\n\t\t\toptions.audio = new Object();\n\t\t// Set the new option\n\t\toptions.audio.bitrate = bitrate;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the audio quality\n\t */\n\tthis.setAudioQuality = function (quality) {\n\t\tif (options.audio == undefined)\n\t\t\toptions.audio = new Object();\n\t\t// Set the new option\n\t\toptions.audio.quality = quality;\n\t\treturn this;\n\t}\n\t\n\t/**\n\t * Sets the watermark\n\t */\n\tthis.setWatermark = function (watermarkPath, settings) {\n\t\t// Base settings\n\t\tvar baseSettings = {\n\t\t\tposition\t\t: \"SW\"\t\t// Position: NE NC NW SE SC SW C CE CW\n\t\t  , margin_nord\t\t: null\t\t// Margin nord\n\t\t  , margin_sud\t\t: null\t\t// Margin sud\n\t\t  , margin_east\t\t: null\t\t// Margin east\n\t\t  , margin_west\t\t: null\t\t// Margin west\n\t\t};\n\t\t\n\t\t// Check if watermark exists\n\t\tif (!fs.existsSync(watermarkPath))\n\t\t\tthrow errors.renderError('invalid_watermark', watermarkPath);\n\t\t\n\t\t// Check if the settings are specified\n\t\tif (settings != null)\n\t\t\tutils.mergeObject(baseSettings, settings);\n\t\t\n\t\t// Check if position is valid\n\t\tif (baseSettings.position == null || utils.in_array(baseSettings.position, ['NE','NC','NW','SE','SC','SW','C','CE','CW']) === false)\n\t\t\tthrow errors.renderError('invalid_watermark_position', baseSettings.position);\n\t\t\n\t\t// Check if margins are valid\n\t\t\n\t\tif (baseSettings.margin_nord == null || isNaN(baseSettings.margin_nord))\n\t\t\tbaseSettings.margin_nord = 0;\n\t\tif (baseSettings.margin_sud == null || isNaN(baseSettings.margin_sud))\n\t\t\tbaseSettings.margin_sud = 0;\n\t\tif (baseSettings.margin_east == null || isNaN(baseSettings.margin_east))\n\t\t\tbaseSettings.margin_east = 0;\n\t\tif (baseSettings.margin_west == null || isNaN(baseSettings.margin_west))\n\t\t\tbaseSettings.margin_west = 0;\n\t\t\n\t\tvar overlay = '';\n\t\t\n\t\tvar getSing = function (val, inverse) {\n\t\t\treturn (val > 0 ? (inverse ? '-' : '+') : (inverse ? '+' : '-')).toString() + Math.abs(val).toString();\n\t\t}\n\t\t\n\t\tvar getHorizontalMargins = function (east, west) {\n\t\t\treturn getSing(east, false).toString() + getSing(west, true).toString();\n\t\t}\n\t\t\n\t\tvar getVerticalMargins = function (nord, sud) {\n\t\t\treturn getSing(nord, false).toString() + getSing(sud, true).toString();\n\t\t}\n\t\t\n\t\t// Calculate formula\t\t\n\t\tswitch (baseSettings.position) {\n\t\t\tcase 'NE':\n\t\t\t\toverlay = '0' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':0' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'NC':\n\t\t\t\toverlay = 'main_w/2-overlay_w/2' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':0' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'NW':\n\t\t\t\toverlay = 'main_w-overlay_w' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':0' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'SE':\n\t\t\t\toverlay = '0' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h-overlay_h' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'SC':\n\t\t\t\toverlay = 'main_w/2-overlay_w/2' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h-overlay_h' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'SW':\n\t\t\t\toverlay = 'main_w-overlay_w' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h-overlay_h' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'CE':\n\t\t\t\toverlay = '0' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h/2-overlay_h/2' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'C':\n\t\t\t\toverlay = 'main_w/2-overlay_w/2' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h/2-overlay_h/2' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t\tcase 'CW':\n\t\t\t\toverlay = 'main_w-overlay_w' + getHorizontalMargins(baseSettings.margin_east, baseSettings.margin_west) + ':main_h/2-overlay_h/2' + getVerticalMargins(baseSettings.margin_nord, baseSettings.margin_sud);\n\t\t\t\tbreak;\n\t\t}\n\t\t\n\t\t// Check if the call comes from internal function\n\t\tif (arguments[2] == undefined || arguments[2] == null) {\n\t\t\tif (options.video == undefined)\n\t\t\t\toptions.video = new Object();\n\t\t\t// Set the new option\n\t\t\toptions.video.watermark = { path : watermarkPath, overlay : overlay };\n\t\t\treturn this;\n\t\t} else if (arguments[2] != undefined && arguments[2] === true) {\n\t\t\tthis.addInput(watermarkPath);\n\t\t\tthis.addFilterComplex('overlay=' + overlay);\n\t\t}\n\t}\n\t\n\t/**\n\t * Save all set commands\n\t */\n\tthis.save = function (destionationFileName, callback) {\n\t\t// Check if the 'video' is present in the options\n\t\tif (options.hasOwnProperty('video')) {\n\t\t\t// Check if video is disabled\n\t\t\tif (options.video.hasOwnProperty('disabled')) {\n\t\t\t\tthis.addCommand('-vn');\t\t\t\t\n\t\t\t} else {\n\t\t\t\t// Check all video property\n\t\t\t\tif (options.video.hasOwnProperty('format'))\n\t\t\t\t\tthis.addCommand('-f', options.video.format);\n\t\t\t\tif (options.video.hasOwnProperty('codec'))\n\t\t\t\t\tthis.addCommand('-vcodec', options.video.codec);\n\t\t\t\tif (options.video.hasOwnProperty('bitrate'))\n\t\t\t\t\tthis.addCommand('-b', parseInt(options.video.bitrate, 10) + 'kb');\n\t\t\t\tif (options.video.hasOwnProperty('framerate'))\n\t\t\t\t\tthis.addCommand('-r', parseInt(options.video.framerate, 10));\n\t\t\t\tif (options.video.hasOwnProperty('startTime'))\n\t\t\t\t\tthis.addCommand('-ss', parseInt(options.video.startTime, 10));\n\t\t\t\tif (options.video.hasOwnProperty('duration'))\n\t\t\t\t\tthis.addCommand('-t', parseInt(options.video.duration, 10));\n\t\t\t\t\n\t\t\t\tif (options.video.hasOwnProperty('watermark')) {\n\t\t\t\t\tthis.addInput(options.video.watermark.path);\n\t\t\t\t\tthis.addFilterComplex('overlay=' + options.video.watermark.overlay);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// Check if the video should be scaled\n\t\t\t\tif (options.video.hasOwnProperty('size')) {\n\t\t\t\t\tvar newDimension = _calculateNewDimension.call(this);\n\t\t\t\t\t\n\t\t\t\t\tif (newDimension.aspect != null) {\n\t\t\t\t\t\tthis.addFilterComplex('scale=iw*sar:ih, pad=max(iw\\\\,ih*(' + newDimension.aspect.x + '/' + newDimension.aspect.y + ')):ow/(' + newDimension.aspect.x + '/' + newDimension.aspect.y + '):(ow-iw)/2:(oh-ih)/2' + (options.video.paddingColor != null ? ':' + options.video.paddingColor : ''));\n\t\t\t\t\t\tthis.addCommand('-aspect', newDimension.aspect.string);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.addCommand('-s', newDimension.width + 'x' + newDimension.height);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Check if the 'audio' is present in the options\n\t\tif (options.hasOwnProperty('audio')) {\n\t\t\t// Check if audio is disabled\n\t\t\tif (options.audio.hasOwnProperty('disabled')) {\n\t\t\t\tthis.addCommand('-an');\t\t\t\t\n\t\t\t} else {\n\t\t\t\t// Check all audio property\n\t\t\t\tif (options.audio.hasOwnProperty('codec'))\n\t\t\t\t\tthis.addCommand('-acodec', options.audio.codec);\n\t\t\t\tif (options.audio.hasOwnProperty('frequency'))\n\t\t\t\t\tthis.addCommand('-ar', parseInt(options.audio.frequency));\n\t\t\t\tif (options.audio.hasOwnProperty('channel'))\n\t\t\t\t\tthis.addCommand('-ac', options.audio.channel);\n\t\t\t\tif (options.audio.hasOwnProperty('quality'))\n\t\t\t\t\tthis.addCommand('-aq', options.audio.quality);\n\t\t\t\tif (options.audio.hasOwnProperty('bitrate'))\n\t\t\t\t\tthis.addCommand('-ab', parseInt(options.audio.bitrate, 10) + 'k');\n\t\t\t}\n\t\t}\n\t\t\n\t\tsetOutput(destionationFileName);\n\t\t\n\t\treturn execCommand.call(this, callback);\n\t}\n\t\n\t/*********************/\n\t/* INTERNAL FUNCTION */\n\t/*********************/\n\t\n\t/**\n\t * Reset the list of commands\n\t */\n\tvar resetCommands = function (self) {\n\t\tcommands\t\t= new Array()\n\t\tinputs\t\t\t= [self.file_path];\n\t\tfiltersComlpex\t= new Array();\n\t\toutput\t\t\t= null;\n\t\toptions\t\t\t= new Object();\n\t}\n\n\t/**\n\t * Calculate width, height and aspect ratio by the new dimension data\n\t */\n\tvar _calculateNewDimension = function () {\n\t\t// Check if keepPixelAspectRatio is undefined\n\t\tvar keepPixelAspectRatio = typeof options.video.keepPixelAspectRatio != 'boolean' ? false : options.video.keepPixelAspectRatio;\n\t\t// Check if keepAspectRatio is undefined\n\t\tvar keepAspectRatio = typeof options.video.keepAspectRatio != 'boolean' ? false : options.video.keepAspectRatio;\n\t\t\n\t\t// Resolution to be taken as a reference\n\t\tvar referrerResolution = this.metadata.video.resolution;\n\t\t// Check if is need keep pixel aspect ratio\n\t\tif (keepPixelAspectRatio) {\n\t\t\t// Check if exists resolution for pixel aspect ratio\n\t\t\tif (utils.isEmptyObj(this.metadata.video.resolutionSquare))\n\t\t\t\tthrow errors.renderError('resolution_square_not_defined');\n\t\t\t\n\t\t\t// Apply the resolutionSquare\n\t\t\treferrerResolution = this.metadata.video.resolutionSquare;\n\t\t}\n\t\t\n\t\t// Final data\n\t\tvar width\t= null\n\t\t  , height\t= null\n\t\t  , aspect\t= null;\n\n\t\t// Regex to check which type of dimension was specified\n\t\tvar fixedWidth\t\t= /([0-9]+)x\\?/.exec(options.video.size)\n\t\t  , fixedHeight\t\t= /\\?x([0-9]+)/.exec(options.video.size)\n\t\t  , percentage\t\t= /([0-9]{1,2})%/.exec(options.video.size)\n\t\t  , classicSize\t\t= /([0-9]+)x([0-9]+)/.exec(options.video.size);\n\t\t  \n\t\tif (fixedWidth) {\n\t\t\t// Set the width dimension\n\t\t\twidth = parseInt(fixedWidth[1], 10);\t\t\t\n\t\t\t// Check if the video has the aspect ratio setted\n\t\t\tif (!utils.isEmptyObj(this.metadata.video.aspect)) {\n\t\t\t\theight = Math.round((width / this.metadata.video.aspect.x) * this.metadata.video.aspect.y);\n\t\t\t} else {\n\t\t\t\t// Calculte the new height\n\t\t\t\theight = Math.round(referrerResolution.h / (referrerResolution.w / parseInt(fixedWidth[1], 10)));\n\t\t\t}\n\t\t} else if (fixedHeight) {\n\t\t\t// Set the width dimension\n\t\t\theight = parseInt(fixedHeight[1], 10);\t\t\t\n\t\t\t// Check if the video has the aspect ratio setted\n\t\t\tif (!utils.isEmptyObj(this.metadata.video.aspect)) {\n\t\t\t\twidth = Math.round((height / this.metadata.video.aspect.y) * this.metadata.video.aspect.x);\n\t\t\t} else {\n\t\t\t\t// Calculte the new width\n\t\t\t\twidth = Math.round(referrerResolution.w / (referrerResolution.h / parseInt(fixedHeight[1], 10)));\n\t\t\t}\t\t\t\n\t\t} else if (percentage) {\n\t\t\t// Calculte the ratio from percentage\n\t\t\tvar ratio = parseInt(percentage[1], 10) / 100;\n\t\t\t// Calculate the new dimensions\n\t\t\twidth = Math.round(referrerResolution.w * ratio);\n\t\t\theight = Math.round(referrerResolution.h * ratio);\n\t\t} else if (classicSize) {\n\t\t\twidth = parseInt(classicSize[1], 10);\n\t\t\theight = parseInt(classicSize[2], 10);\n\t\t} else \n\t\t\tthrow errors.renderError('size_format', options.video.size);\n\t\t\n\t\t// If the width or height are not multiples of 2 will be decremented by one unit\n\t\tif (width % 2 != 0) width -= 1;\n\t\tif (height % 2 != 0) height -= 1;\n\t\t\n\t\tif (keepAspectRatio) {\n\t\t\t// Calculate the new aspect ratio\n\t\t\tvar gcdValue\t= utils.gcd(width, height);\n\t\t\t\n\t\t\taspect = new Object();\n\t\t\taspect.x = width / gcdValue;\n\t\t\taspect.y = height / gcdValue;\n\t\t\taspect.string = aspect.x + ':' + aspect.y;\n\t\t}\n\t\t\n\t\treturn { width : width, height : height, aspect : aspect };\n\t}\n\t\n\t/**\n\t * Executing the commands list\n\t */\n\tvar execCommand = function (callback, folder) {\n\t\t// Checking if folder is defined\n\t\tvar onlyDestinationFile = folder != undefined ? false : true;\n\t\t// Building the value for return value. Check if the callback is not a function. In this case will created a new instance of the deferred class\n\t\tvar deferred = typeof callback != 'function' ? when.defer() : { promise : null };\n\t\t// Create a copy of the commands list\n\t\tvar finalCommands = ['ffmpeg -i']\n\t\t\t.concat(inputs.join(' -i '))\n\t\t\t.concat(commands.join(' '))\n\t\t\t.concat(filtersComlpex.length > 0 ? ['-filter_complex \"'].concat(filtersComlpex.join(', ')).join('') + '\"' : [])\n\t\t\t.concat([output]);\n\t\t// Reset commands\n\t\tresetCommands(this);\n\t\t// Execute the commands from the list\n\t\tutils.exec(finalCommands, settings, function (error, stdout, stderr) {\n\t\t\t// Building the result\n\t\t\tvar result = null;\n\t\t\tif (!error) {\n\t\t\t\t// Check if show only destination filename or the complete file list\n\t\t\t\tif (onlyDestinationFile) {\n\t\t\t\t\tresult = finalCommands[finalCommands.length-1];\n\t\t\t\t} else {\n\t\t\t\t\t// Clean possible \"/\" at the end of the string\n\t\t\t\t\tif (folder.charAt(folder.length-1) == \"/\")\n\t\t\t\t\t\tfolder = folder.substr(0, folder.length-1);\n\t\t\t\t\t// Read file list inside the folder\n\t\t\t\t\tresult = fs.readdirSync(folder);\n\t\t\t\t\t// Scan all file and prepend the folder path\n\t\t\t\t\tfor (var i in result)\n\t\t\t\t\t\tresult[i] = [folder, result[i]].join('/')\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Check if the callback is a function\n\t\t\tif (typeof callback == 'function') {\n\t\t\t\t// Call the callback to return the info\n\t\t\t\tcallback(error, result);\n\t\t\t} else {\n\t\t\t\tif (error) {\n\t\t\t\t\t// Negative response\n\t\t\t\t\tdeferred.reject(error);\n\t\t\t\t} else {\n\t\t\t\t\t// Positive response\n\t\t\t\t\tdeferred.resolve(result);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t// Return a possible promise instance\n\t\treturn deferred.promise;\n\t}\n\t\n\t/*******************/\n\t/* PRESET FUNCTION */\n\t/*******************/\n\t\n\t/**\n\t * Extracting sound from a video, and save it as Mp3\n\t */\n\tthis.fnExtractSoundToMP3 = function (destionationFileName, callback) {\n\t\t// Check if file already exists. In this case will remove it\n\t\tif (fs.existsSync(destionationFileName)) \n\t\t\tfs.unlinkSync(destionationFileName);\n\n\t\t// Building the final path\n\t\tvar destinationDirName\t\t= path.dirname(destionationFileName)\n\t\t  , destinationFileNameWE\t= path.basename(destionationFileName, path.extname(destionationFileName)) + '.mp3'\n\t\t  , finalPath\t\t\t\t= path.join(destinationDirName, destinationFileNameWE);\n\t\t\n\t\tresetCommands(this);\n\t\t\n\t\t// Adding commands to the list\n\t\tthis.addCommand('-vn');\n\t\tthis.addCommand('-ar', 44100);\n\t\tthis.addCommand('-ac', 2);\n\t\tthis.addCommand('-ab', 192);\n\t\tthis.addCommand('-f', 'mp3');\n\t\t\n\t\t// Add destination file path to the command list\n\t\tsetOutput(finalPath);\n\t\t\n\t\t// Executing the commands list\n\t\treturn execCommand.call(this, callback);\n\t}\n\t\n\t/**\n\t * Extract frame from video file\n\t */\n\tthis.fnExtractFrameToJPG = function (/* destinationFolder, settings, callback */) {\n\t\t\n\t\tvar destinationFolder\t= null\n\t\t  , newSettings\t\t\t= null\n\t\t  , callback\t\t\t= null;\n\t\t  \n\t\tvar settings = {\n\t\t\tstart_time\t\t\t\t: null\t\t// Start time to recording\n\t\t  , duration_time\t\t\t: null\t\t// Duration of recording\n\t\t  , frame_rate\t\t\t\t: null\t\t// Number of the frames to capture in one second\n\t\t  , size\t\t\t\t\t: null\t\t// Dimension each frame\n\t\t  , number\t\t\t\t\t: null\t\t// Total frame to capture\n\t\t  , every_n_frames\t\t\t: null\t\t// Frame to capture every N frames\n\t\t  , every_n_seconds\t\t\t: null\t\t// Frame to capture every N seconds\n\t\t  , every_n_percentage\t\t: null\t\t// Frame to capture every N percentage range\n\t\t  , keep_pixel_aspect_ratio\t: true\t\t// Mantain the original pixel video aspect ratio\n\t\t  , keep_aspect_ratio\t\t: true\t\t// Mantain the original aspect ratio\n\t\t  , padding_color\t\t\t: 'black'\t// Padding color\n\t\t  , file_name\t\t\t\t: null\t\t// File name\n\t\t};\n\t\t  \n\t\t// Scan all arguments\n\t\tfor (var i in arguments) {\n\t\t\t// Check the type of the argument\n\t\t\tswitch (typeof arguments[i]) {\n\t\t\t\tcase 'string':\n\t\t\t\t\tdestinationFolder = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'object':\n\t\t\t\t\tnewSettings = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'function':\n\t\t\t\t\tcallback = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// Check if the settings are specified\n\t\tif (newSettings !== null)\n\t\t\tutils.mergeObject(settings, newSettings);\n\n\t\t// Check if 'start_time' is in the format hours:minutes:seconds\n\t\tif (settings.start_time != null) {\n\t\t\tif (/([0-9]+):([0-9]{2}):([0-9]{2})/.exec(settings.start_time))\n\t\t\t\tsettings.start_time = utils.durationToSeconds(settings.start_time);\n\t\t\telse if (!isNaN(settings.start_time))\n\t\t\t\tsettings.start_time = parseInt(settings.start_time, 10);\n\t\t\telse\n\t\t\t\tsettings.start_time = null;\n\t\t}\n\n\t\t// Check if 'duration_time' is in the format hours:minutes:seconds\n\t\tif (settings.duration_time != null) {\n\t\t\tif (/([0-9]+):([0-9]{2}):([0-9]{2})/.exec(settings.duration_time))\n\t\t\t\tsettings.duration_time = utils.durationToSeconds(settings.duration_time);\n\t\t\telse if (!isNaN(settings.duration_time))\n\t\t\t\tsettings.duration_time = parseInt(settings.duration_time, 10);\n\t\t\telse\n\t\t\t\tsettings.duration_time = null;\n\t\t}\n\n\t\t// Check if the value of the framerate is number type\n\t\tif (settings.frame_rate != null && isNaN(settings.frame_rate))\n\t\t\tsettings.frame_rate = null;\n\n\t\t// If the size is not settings then the size of the screenshots is equal to video size\n\t\tif (settings.size == null)\n\t\t\tsettings.size = this.metadata.video.resolution.w + 'x' + this.metadata.video.resolution.h;\n\n\t\t// Check if the value of the 'number frame to capture' is number type\n\t\tif (settings.number != null && isNaN(settings.number))\n\t\t\tsettings.number = null;\n\n\t\tvar every_n_check = 0;\n\n\t\t// Check if the value of the 'every_n_frames' is number type\n\t\tif (settings.every_n_frames != null && isNaN(settings.every_n_frames)) {\n\t\t\tsettings.every_n_frames = null;\n\t\t\tevery_n_check++;\n\t\t}\n\n\t\t// Check if the value of the 'every_n_seconds' is number type\n\t\tif (settings.every_n_seconds != null && isNaN(settings.every_n_seconds)) {\n\t\t\tsettings.every_n_seconds = null;\n\t\t\tevery_n_check++;\n\t\t}\n\n\t\t// Check if the value of the 'every_n_percentage' is number type\n\t\tif (settings.every_n_percentage != null && (isNaN(settings.every_n_percentage) || settings.every_n_percentage > 100)) {\n\t\t\tsettings.every_n_percentage = null;\n\t\t\tevery_n_check++;\n\t\t}\n\t\t\n\t\tif (every_n_check >= 2) {\n\t\t\tif (callback) {\n\t\t\t\tcallback(errors.renderError('extract_frame_invalid_everyN_options'));\n\t\t\t} else {\n\t\t\t\tthrow errors.renderError('extract_frame_invalid_everyN_options');\n\t\t\t}\n\t\t}\t\t\t\n\t\t\n\t\t// If filename is null then his value is equal to original filename\n\t\tif (settings.file_name == null) {\n\t\t\tsettings.file_name = path.basename(this.file_path, path.extname(this.file_path));\n\t\t} else {\n\t\t\t// Retrieve all possible replacements\n\t\t\tvar replacements = settings.file_name.match(/(\\%[a-zA-Z]{1})/g);\n\t\t\t// Check if exists replacements. The scan all replacements and build the final filename\n\t\t\tif (replacements) {\n\t\t\t\tfor (var i in replacements) {\n\t\t\t\t\tswitch (replacements[i]) {\n\t\t\t\t\t\tcase '%t':\n\t\t\t\t\t\t\tsettings.file_name = settings.file_name.replace('%t', new Date().getTime());\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase '%s':\n\t\t\t\t\t\t\tsettings.file_name = settings.file_name.replace('%s', settings.size);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase '%x':\n\t\t\t\t\t\t\tsettings.file_name = settings.file_name.replace('%x', settings.size.split(':')[0]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase '%y':\n\t\t\t\t\t\t\tsettings.file_name = settings.file_name.replace('%y', settings.size.split(':')[1]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tsettings.file_name = settings.file_name.replace(replacements[i], '');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// At the filename will added the number of the frame\n\t\tsettings.file_name = path.basename(settings.file_name, path.extname(settings.file_name)) + '_%d.jpg';\n\t\t\n\t\t// Create the directory to save the extracted frames\n\t\tutils.mkdir(destinationFolder, 0777);\n\t\t\n\t\tresetCommands(this);\n\t\t\n\t\t// Adding commands to the list\n\t\tif (settings.startTime)\n\t\t\tthis.addCommand('-ss', settings.startTime);\n\t\tif (settings.duration_time)\n\t\t\tthis.addCommand('-t', settings.duration_time);\n\t\tif (settings.frame_rate)\n\t\t\tthis.addCommand('-r', settings.frame_rate);\n\n\t\t// Setting the size and padding settings\n\t\tthis.setVideoSize(settings.size, settings.keep_pixel_aspect_ratio, settings.keep_aspect_ratio, settings.padding_color);\n\t\t// Get the dimensions\n\t\tvar newDimension = _calculateNewDimension.call(this);\n\t\t// Apply the size and padding commands\n\t\tthis.addCommand('-s', newDimension.width + 'x' + newDimension.height);\n\t\t// CHeck if isset aspect ratio options\n\t\tif (newDimension.aspect != null) {\n\t\t\tthis.addFilterComplex('scale=iw*sar:ih, pad=max(iw\\\\,ih*(' + newDimension.aspect.x + '/' + newDimension.aspect.y + ')):ow/(' + newDimension.aspect.x + '/' + newDimension.aspect.y + '):(ow-iw)/2:(oh-ih)/2' + (settings.padding_color != null ? ':' + settings.padding_color : ''));\n\t\t\tthis.addCommand('-aspect', newDimension.aspect.string);\n\t\t}\n\n\t\tif (settings.number)\n\t\t\tthis.addCommand('-vframes', settings.number);\n\t\tif (settings.every_n_frames) {\n\t\t\tthis.addCommand('-vsync', 0);\t\t\t\t\t\n\t\t\tthis.addFilterComplex('select=not(mod(n\\\\,' + settings.every_n_frames + '))');\n\t\t}\n\t\tif (settings.every_n_seconds) {\n\t\t\tthis.addCommand('-vsync', 0);\n\t\t\tthis.addFilterComplex('select=not(mod(t\\\\,' + settings.every_n_seconds + '))');\n\t\t}\n\t\tif (settings.every_n_percentage) {\n\t\t\tthis.addCommand('-vsync', 0);\n\t\t\tthis.addFilterComplex('select=not(mod(t\\\\,' + parseInt((this.metadata.duration.seconds / 100) * settings.every_n_percentage) + '))');\n\t\t}\n\t\t\n\t\t// Add destination file path to the command list\n\t\tsetOutput([destinationFolder,settings.file_name].join('/'));\n\n\t\t// Executing the commands list\n\t\treturn execCommand.call(this, callback, destinationFolder);\n\t}\n\n\t/**\n\t * Add a watermark to the video and save it\n\t */\n\tthis.fnAddWatermark = function (watermarkPath /* newFilepath , settings, callback */) {\n\n\t\tvar newFilepath\t\t= null\n\t\t  , newSettings\t\t= null\n\t\t  , callback\t\t= null;\n\t\t  \n\t\t// Scan all arguments\n\t\tfor (var i = 1; i < arguments.length; i++) {\n\t\t\t// Check the type of the argument\n\t\t\tswitch (typeof arguments[i]) {\n\t\t\t\tcase 'string':\n\t\t\t\t\tnewFilepath = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'object':\n\t\t\t\t\tnewSettings = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'function':\n\t\t\t\t\tcallback = arguments[i];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tresetCommands(this);\n\n\t\t// Call the function to add the watermark options\n\t\tthis.setWatermark(watermarkPath, newSettings, true);\n\t\t\n\t\tif (newFilepath == null)\n\t\t\tnewFilepath = path.dirname(this.file_path) + '/' + \n\t\t\t\t\t\t  path.basename(this.file_path, path.extname(this.file_path)) + '_watermark_' + \n\t\t\t\t\t\t  path.basename(watermarkPath, path.extname(watermarkPath)) + \n\t\t\t\t\t\t  path.extname(this.file_path);\n\t\t\n\t\t// Add destination file path to the command list\n\t\tsetOutput(newFilepath);\n\n\t\t// Executing the commands list\n\t\treturn execCommand.call(this, callback);\n\t}\n\t\n\t/**\n\t * Constructor\n\t */\n\tvar __constructor = function (self) {\n\t\tresetCommands(self);\n\t}(this);\n}","module.exports.size = {\n\t'SQCIF'\t\t: '128x96'\n  ,\t'QCIF'\t\t: '176x144'\n  ,\t'CIF'\t\t: '352x288'\n  ,\t'4CIF'\t\t: '704x576'\n  ,\t'QQVGA'\t\t: '160x120'\n  ,\t'QVGA'\t\t: '320x240'\n  ,\t'VGA'\t\t: '640x480'\n  ,\t'SVGA'\t\t: '800x600'\n  ,\t'XGA'\t\t: '1024x768'\n  ,\t'UXGA'\t\t: '1600x1200'\n  ,\t'QXGA'\t\t: '2048x1536'\n  ,\t'SXGA'\t\t: '1280x1024'\n  ,\t'QSXGA'\t\t: '2560x2048'\n  ,\t'HSXGA'\t\t: '5120x4096'\n  ,\t'WVGA'\t\t: '852x480'\n  ,\t'WXGA'\t\t: '1366x768'\n  ,\t'WSXGA'\t\t: '1600x1024'\n  ,\t'WUXGA'\t\t: '1920x1200'\n  ,\t'WOXGA'\t\t: '2560x1600'\n  ,\t'WQSXGA'\t: '3200x2048'\n  ,\t'WQUXGA'\t: '3840x2400'\n  ,\t'WHSXGA'\t: '6400x4096'\n  ,\t'WHUXGA'\t: '7680x4800'\n  ,\t'CGA'\t\t: '320x200'\n  ,\t'EGA'\t\t: '640x350'\n  ,\t'HD480'\t\t: '852x480'\n  ,\t'HD720'\t\t: '1280x720'\n  ,\t'HD1080'\t: '1920x1080'\n}\n\nmodule.exports.ratio = {\n\t'4:3'\t\t: 1.33\n  , '3:2'\t\t: 1.5\n  , '14:9'\t\t: 1.56\n  , '16:9'\t\t: 1.78\n  , '21:9'\t\t: 2.33\n}\n\nmodule.exports.audio_channel = {\n\t'mono'\t\t: 1\n  ,\t'stereo'\t: 2\n}"],"sourceRoot":""}